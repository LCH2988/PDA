<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="LINE活動報名系統">
    <title>活動報名系統</title>
    
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.32/dist/sweetalert2.all.min.js" rel="stylesheet">
    
    <style>
        body {
            background-color: #f5f5f5;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }

        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        .loading.active {
            display: flex;
        }

        .card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .profile-image {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            margin: 20px auto;
            display: block;
            border: 3px solid #fff;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .btn-primary {
            background-color: #00B900;
            border-color: #00B900;
        }

        .btn-primary:hover {
            background-color: #009900;
            border-color: #009900;
        }

        .form-control:focus {
            border-color: #00B900;
            box-shadow: 0 0 0 0.2rem rgba(0, 185, 0, 0.25);
        }

        .error-message {
            color: #dc3545;
            font-size: 0.875rem;
            margin-top: 0.25rem;
            display: none;
        }

        .error-message.show {
            display: block;
        }
    </style>
</head>
<body>
    <!-- Loading 遮罩 -->
    <div id="loading" class="loading">
        <div class="spinner-border text-light" role="status">
            <span class="visually-hidden">載入中...</span>
        </div>
    </div>

    <div class="container py-4">
        <!-- 個人資料卡片 -->
        <div class="card">
            <div class="card-body text-center">
                <img id="profileImage" src="https://via.placeholder.com/100" alt="個人頭像" class="profile-image">
                <h5 id="displayName" class="mb-1">載入中...</h5>
                <p id="loginCount" class="text-muted small mb-0">登入次數: --</p>
            </div>
        </div>

        <!-- 個人資料表單 -->
        <div class="card">
            <div class="card-body">
                <h5 class="card-title mb-4">個人資料</h5>
                <form id="profileForm" novalidate>
                    <div class="mb-3">
                        <label for="realName" class="form-label">真實姓名</label>
                        <input type="text" class="form-control" id="realName" name="realName" required>
                        <div class="error-message">請輸入真實姓名</div>
                    </div>

                    <div class="mb-3">
                        <label for="phone" class="form-label">手機號碼</label>
                        <input type="tel" class="form-control" id="phone" name="phone" 
                               pattern="^09\d{8}$" required>
                        <div class="error-message">請輸入有效的手機號碼</div>
                    </div>

                    <div class="mb-3">
                        <label for="email" class="form-label">電子信箱</label>
                        <input type="email" class="form-control" id="email" name="email" required>
                        <div class="error-message">請輸入有效的電子信箱</div>
                    </div>

                    <div class="mb-3">
                        <label for="birthday" class="form-label">生日</label>
                        <input type="date" class="form-control" id="birthday" name="birthday">
                        <div class="error-message">請選擇生日</div>
                    </div>

                    <div class="mb-3">
                        <label for="idNumber" class="form-label">身分證字號</label>
                        <input type="text" class="form-control" id="idNumber" name="idNumber" 
                               pattern="^[A-Z][12]\d{8}$">
                        <div class="error-message">請輸入有效的身分證字號</div>
                    </div>

                    <div class="mb-3">
                        <label for="dietary" class="form-label">飲食習慣</label>
                        <select class="form-select" id="dietary" name="dietary">
                            <option value="">請選擇</option>
                            <option value="normal">一般</option>
                            <option value="vegetarian">素食</option>
                            <option value="halal">清真</option>
                        </select>
                    </div>

                    <button type="submit" class="btn btn-primary w-100">更新資料</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.32/dist/sweetalert2.all.min.js"></script>
    <script src="js/config.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
