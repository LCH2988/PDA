<!-- ===========================
     File: Frontend.html (主框架)
     =========================== -->
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>帕金森病友會｜整合系統</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <?!= include('Shared'); ?>
  <style>
    /* 主框架專屬（模組通用樣式在 Shared.html） */
    body { margin:0; font-family: var(--font-stack); background:var(--color-bg); color:var(--color-text); }
    header.app-shell {
      position:sticky; top:0; z-index:120;
      background:linear-gradient(90deg,var(--c-primary),var(--c-primary-accent));
      color:#fff; padding:12px 20px;
      display:flex; align-items:center; justify-content:space-between;
      border-bottom:1px solid rgba(255,255,255,.25);
    }
    header .brand { font-size:1.05rem; font-weight:600; letter-spacing:1px; display:flex; flex-direction:column; }
    header .brand small { font-size:.65rem; opacity:.85; font-weight:400; margin-top:2px; }
    nav.main-nav {
      position:sticky; top:62px; z-index:110;
      backdrop-filter:blur(8px);
      background:rgba(255,255,255,.85);
      display:flex; gap:6px; padding:8px 14px;
      overflow-x:auto;
      border-bottom:1px solid var(--color-border);
    }
    html[data-theme="dark"] nav.main-nav { background:rgba(28,29,31,.85); }
    nav.main-nav button {
      background:#fff; color:var(--c-primary); border:1px solid var(--c-primary);
      padding:9px 18px; border-radius:30px; font-size:.8rem; font-weight:600;
      cursor:pointer; transition:.25s;
    }
    html[data-theme="dark"] nav.main-nav button { background:#1f1f21; color:var(--c-primary-accent); }
    nav.main-nav button.active {
      background:var(--c-primary); color:#fff; box-shadow:0 4px 10px -2px rgba(0,0,0,.25);
    }
    main.app-main { max-width:1320px; margin:0 auto; padding:24px clamp(14px,2.5vw,40px) 160px; }
    section.module-wrapper { display:none; animation: fadeIn .5s; }
    section.module-wrapper.active { display:block; }
    @keyframes fadeIn { from{opacity:0; transform:translateY(4px);} to{opacity:1; transform:translateY(0);} }
    footer.app-footer {
      margin-top:80px; padding:28px 16px; font-size:.65rem; text-align:center;
      color:var(--color-text-muted); border-top:1px solid var(--color-border);
      background:linear-gradient(180deg,var(--surface-1),var(--surface-2));
    }
    /* 浮動工具列 */
    .floating-tools {
      position:fixed; right:18px; bottom:20px; display:flex; flex-direction:column; gap:10px; z-index:150;
    }
    .floating-tools button {
      background:var(--surface-2); color:var(--c-primary); border:1px solid var(--c-primary-accent);
      padding:10px 14px; font-size:.65rem; font-weight:600; border-radius:12px;
      box-shadow:0 4px 14px -4px rgba(0,0,0,.25); cursor:pointer; transition:.3s;
    }
    .floating-tools button:hover { transform:translateY(-2px); }
    html[data-theme="dark"] .floating-tools button { background:#272a2f; color:#e4f5e9; }
    @media(max-width:860px){
      main.app-main { padding-bottom:220px; }
      .floating-tools { bottom:86px; }
    }
  </style>
</head>
<body>
  <header class="app-shell">
    <div class="brand">
      <span>帕金森病友會 系統平台</span>
      <small>會員・活動・財務・管理後台</small>
    </div>
    <div class="toolbar-inline">
      <button class="btn ghost small" data-action="toggleFont">字級</button>
      <button class="btn ghost small" data-action="toggleTheme">主題</button>
      <button class="btn ghost small" data-action="reload">重載</button>
    </div>
  </header>

  <nav class="main-nav" id="MainNav" aria-label="主功能模組">
    <button data-module="member" class="active" aria-controls="Module_member" aria-selected="true">會員專區</button>
    <button data-module="finance" aria-controls="Module_finance">財務系統</button>
    <button data-module="activity" aria-controls="Module_activity">活動公告</button>
    <button data-module="admin" id="AdminNavBtn" class="hidden" aria-controls="Module_admin">管理員專區</button>
  </nav>

  <main class="app-main" id="AppMain" tabindex="-1">
    <!-- 模組容器（動態插入各模組的 section） -->
    <section id="Module_member" class="module-wrapper active"></section>
    <section id="Module_finance" class="module-wrapper"></section>
    <section id="Module_activity" class="module-wrapper"></section>
    <section id="Module_admin" class="module-wrapper"></section>
  </main>

  <footer class="app-footer">
    <div>帕金森病友會系統 © <span id="FooterYear"></span> | 前端模組化專業版</div>
    <div style="margin-top:4px;">建議使用 Chrome / Edge / Safari 最新版本</div>
  </footer>

  <div class="floating-tools" aria-label="快速工具">
    <button data-action="scrollTop">⬆ 回頂端</button>
    <button data-action="focusMain">⚡ 主內容</button>
  </div>

  <!-- 插入四大模組 -->
  <?!= include('MemberModule'); ?>
  <?!= include('FinanceModule'); ?>
  <?!= include('ActivityModule'); ?>
  <?!= include('AdminModule'); ?>

  <script>
    // 主初始化：載入 App 核心（Shared 提供全域 AppCore）
    document.addEventListener('DOMContentLoaded', async ()=>{
      await AppCore.init();
      // 掛載模組（模組檔註冊在 ModulesRegistry）
      ModulesRegistry.mount('member','#Module_member');
      ModulesRegistry.mount('activity','#Module_activity');
      ModulesRegistry.mount('finance','#Module_finance');
      if(AppState.isAdmin) {
        document.getElementById('AdminNavBtn').classList.remove('hidden');
        ModulesRegistry.mount('admin','#Module_admin');
      }
      AppUI.bindNavigation();
      AppUI.enhance();
    });
  </script>
</body>
</html>




