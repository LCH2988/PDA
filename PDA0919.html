<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>帕金森病友會管理系統</title>
  <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAQAABILAAASCwAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/4CAg/////wD///8A////AP///wD///8A4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/////AP///wD///8A4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/4CAg/////wD///8A4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/4CAg/+AgIP////8A////AOAgIP/gICD/4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/////AP///wDgICD/4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/4CAg/////wD///8A4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/4CAg/+AgIP////8A////AOAgIP/gICD/4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/////AP///wDgICD/4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/4CAg/////wD///8A4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/4CAg/+AgIP////8A////AP///wDgICD/4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/4CAg/+AgIP////8A////AP///wD///8A4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/4CAg/+AgIP////8A////AP///wD///8A////AOAgIP/gICD/4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/4CAg/+AgIP////8A////AP///wD///8A////AP///wDgICD/4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/4CAg/+AgIP////8A////AP///wD///8A////AP///wD///8A4CAg/+AgIP/gICD/4CAg/+AgIP/gICD/4CAg/+AgIP////8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A">
  <style>
      * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
      }

      body {
          font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          min-height: 100vh;
          padding: 20px;
      }

      .container {
          max-width: 1200px;
          margin: 0 auto;
          background: white;
          border-radius: 15px;
          box-shadow: 0 10px 30px rgba(0,0,0,0.2);
          overflow: hidden;
      }

      .header {
          background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
          color: white;
          padding: 30px;
          text-align: center;
      }

      .header h1 {
          font-size: 2.5em;
          margin-bottom: 10px;
      }

      .header p {
          font-size: 1.2em;
          opacity: 0.9;
      }

      .nav-tabs {
          display: flex;
          background: #f8f9fa;
          border-bottom: 1px solid #dee2e6;
          flex-wrap: wrap;
      }

      .nav-tab {
          flex: 1;
          min-width: 120px;
          padding: 15px 10px;
          background: none;
          border: none;
          cursor: pointer;
          font-size: 14px;
          font-weight: 500;
          color: #6c757d;
          transition: all 0.3s ease;
          text-align: center;
      }

      .nav-tab:hover {
          background: #e9ecef;
          color: #495057;
      }

      .nav-tab.active {
          background: white;
          color: #4CAF50;
          border-bottom: 3px solid #4CAF50;
      }

      .tab-content {
          display: none;
          padding: 30px;
      }

      .tab-content.active {
          display: block;
      }

      .form-group {
          margin-bottom: 20px;
      }

      .form-group label {
          display: block;
          margin-bottom: 8px;
          font-weight: 600;
          color: #333;
      }

      .form-group input,
      .form-group select,
      .form-group textarea {
          width: 100%;
          padding: 12px 15px;
          border: 2px solid #e1e5e9;
          border-radius: 8px;
          font-size: 16px;
          transition: border-color 0.3s ease;
      }

      .form-group input:focus,
      .form-group select:focus,
      .form-group textarea:focus {
          outline: none;
          border-color: #4CAF50;
      }

      .btn {
          padding: 12px 30px;
          border: none;
          border-radius: 8px;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.3s ease;
          margin-right: 10px;
          margin-bottom: 10px;
      }

      .btn-primary {
          background: #4CAF50;
          color: white;
      }

      .btn-primary:hover {
          background: #45a049;
          transform: translateY(-2px);
      }

      .btn-secondary {
          background: #6c757d;
          color: white;
      }

      .btn-secondary:hover {
          background: #5a6268;
      }

      .btn-danger {
          background: #dc3545;
          color: white;
      }

      .btn-danger:hover {
          background: #c82333;
      }

      .alert {
          padding: 15px;
          margin-bottom: 20px;
          border-radius: 8px;
          font-weight: 500;
      }

      .alert-success {
          background: #d4edda;
          color: #155724;
          border: 1px solid #c3e6cb;
      }

      .alert-error {
          background: #f8d7da;
          color: #721c24;
          border: 1px solid #f5c6cb;
      }

      .alert-info {
          background: #d1ecf1;
          color: #0c5460;
          border: 1px solid #bee5eb;
      }

      .card {
          background: white;
          border-radius: 10px;
          padding: 20px;
          margin-bottom: 20px;
          box-shadow: 0 2px 10px rgba(0,0,0,0.1);
          border-left: 4px solid #4CAF50;
      }

      .card h3 {
          color: #333;
          margin-bottom: 15px;
          font-size: 1.3em;
      }

      .card p {
          color: #666;
          line-height: 1.6;
          margin-bottom: 10px;
      }

      .activity-list {
          display: grid;
          gap: 20px;
      }

      .activity-item {
          background: #f8f9fa;
          padding: 20px;
          border-radius: 10px;
          border-left: 4px solid #4CAF50;
      }

      .activity-item h4 {
          color: #333;
          margin-bottom: 10px;
      }

      .activity-item .meta {
          color: #666;
          font-size: 14px;
          margin-bottom: 10px;
      }

      .activity-item .description {
          color: #555;
          margin-bottom: 15px;
          line-height: 1.5;
      }

      .loading {
          text-align: center;
          padding: 40px;
          color: #666;
      }

      .spinner {
          border: 4px solid #f3f3f3;
          border-top: 4px solid #4CAF50;
          border-radius: 50%;
          width: 40px;
          height: 40px;
          animation: spin 1s linear infinite;
          margin: 0 auto 20px;
      }

      @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
      }

      .form-row {
          display: flex;
          gap: 20px;
      }

      .form-row .form-group {
          flex: 1;
      }

      .status-badge {
          display: inline-block;
          padding: 4px 12px;
          border-radius: 20px;
          font-size: 12px;
          font-weight: 600;
          text-transform: uppercase;
      }

      .status-active {
          background: #d4edda;
          color: #155724;
      }

      .status-pending {
          background: #fff3cd;
          color: #856404;
      }

      .status-inactive {
          background: #f8d7da;
          color: #721c24;
      }

      .demo-notice {
          background: #fff3cd;
          color: #856404;
          padding: 15px;
          border-radius: 8px;
          margin-bottom: 20px;
          border: 1px solid #ffeaa7;
      }

      @media (max-width: 768px) {
          .container {
              margin: 10px;
              border-radius: 10px;
          }

          .header {
              padding: 20px;
          }

          .header h1 {
              font-size: 2em;
          }

          .nav-tabs {
              flex-direction: column;
          }

          .nav-tab {
              flex: none;
              width: 100%;
          }

          .tab-content {
              padding: 20px;
          }

          .form-row {
              flex-direction: column;
              gap: 0;
          }
      }
  </style>
</head>
<body>
  <div class="container">
      <div class="header">
          <h1>🌟 帕金森病友會管理系統</h1>
          <p>關懷、支持、共同成長</p>
      </div>

      <div class="demo-notice">
          <strong>📢 系統說明：</strong>這是示範版本，實際功能需要連接 Google Apps Script 後端。請參考部署說明文件進行完整設定。
      </div>

      <div class="nav-tabs">
          <button class="nav-tab active" onclick="showTab('register')">會員註冊</button>
          <button class="nav-tab" onclick="showTab('profile')">個人資料</button>
          <button class="nav-tab" onclick="showTab('activities')">活動報名</button>
          <button class="nav-tab" onclick="showTab('volunteer')">志工服務</button>
          <button class="nav-tab" onclick="showTab('donation')">愛心捐款</button>
          <button class="nav-tab" onclick="showTab('admin')">管理功能</button>
      </div>

      <!-- 會員註冊 -->
      <div id="register" class="tab-content active">
          <div class="card">
              <h3>🎯 會員註冊</h3>
              <p>歡迎加入帕金森病友會！請填寫以下資料完成註冊。</p>
          </div>

          <form id="registerForm">
              <div class="form-row">
                  <div class="form-group">
                      <label for="lineId">LINE ID *</label>
                      <input type="text" id="lineId" name="lineId" required placeholder="請輸入您的LINE ID">
                  </div>
                  <div class="form-group">
                      <label for="lineName">LINE 暱稱</label>
                      <input type="text" id="lineName" name="lineName" placeholder="您的LINE顯示名稱">
                  </div>
              </div>

              <div class="form-row">
                  <div class="form-group">
                      <label for="realName">真實姓名 *</label>
                      <input type="text" id="realName" name="realName" required placeholder="請輸入真實姓名">
                  </div>
                  <div class="form-group">
                      <label for="memberType">會員類別 *</label>
                      <select id="memberType" name="memberType" required>
                          <option value="">請選擇</option>
                          <option value="病友">病友</option>
                          <option value="家屬">家屬</option>
                          <option value="志工">志工</option>
                          <option value="醫護">醫護人員</option>
                          <option value="支持者">支持者</option>
                      </select>
                  </div>
              </div>

              <div class="form-row">
                  <div class="form-group">
                      <label for="phone">聯絡電話</label>
                      <input type="tel" id="phone" name="phone" placeholder="09XX-XXX-XXX">
                  </div>
                  <div class="form-group">
                      <label for="email">電子郵件</label>
                      <input type="email" id="email" name="email" placeholder="example@email.com">
                  </div>
              </div>

              <div class="form-row">
                  <div class="form-group">
                      <label for="birthday">生日</label>
                      <input type="date" id="birthday" name="birthday">
                  </div>
                  <div class="form-group">
                      <label for="address">通訊地址</label>
                      <input type="text" id="address" name="address" placeholder="完整地址">
                  </div>
              </div>

              <button type="submit" class="btn btn-primary">提交註冊</button>
              <button type="reset" class="btn btn-secondary">重置表單</button>
          </form>
      </div>

      <!-- 個人資料 -->
      <div id="profile" class="tab-content">
          <div class="card">
              <h3>👤 個人資料管理</h3>
              <p>查看和更新您的個人資料。</p>
          </div>

          <div class="alert alert-info">
              <strong>示範模式：</strong>請先完成後端設定以使用此功能。
          </div>
      </div>

      <!-- 活動報名 -->
      <div id="activities" class="tab-content">
          <div class="card">
              <h3>🎪 活動報名</h3>
              <p>參與我們精心安排的各種活動，與病友們一起學習成長。</p>
          </div>

          <div class="activity-list">
              <div class="activity-item">
                  <h4>🏥 健康講座：帕金森病的日常照護</h4>
                  <div class="meta">📅 2024-12-01 14:00-16:00 | 📍 台北市立醫院 | 💰 免費 | 👥 25/30</div>
                  <div class="description">邀請專業醫師分享帕金森病的日常照護技巧，包含運動復健、飲食營養等重要知識。</div>
                  <span class="status-badge status-active">開放報名</span>
                  <button onclick="demoAlert()" class="btn btn-primary">立即報名</button>
              </div>
              
              <div class="activity-item">
                  <h4>🎵 音樂治療體驗課程</h4>
                  <div class="meta">📅 2024-12-08 10:00-12:00 | 📍 社區活動中心 | 💰 $200 | 👥 18/20</div>
                  <div class="description">透過音樂節拍和歌唱活動，改善動作協調能力，提升生活品質。</div>
                  <span class="status-badge status-active">開放報名</span>
                  <button onclick="demoAlert()" class="btn btn-primary">立即報名</button>
              </div>

              <div class="activity-item">
                  <h4>🍳 營養料理工作坊</h4>
                  <div class="meta">📅 2024-12-15 13:30-16:30 | 📍 烹飪教室 | 💰 $500 | 👥 12/15</div>
                  <div class="description">學習製作適合帕金森病友的營養餐點，由營養師親自指導。</div>
                  <span class="status-badge status-active">開放報名</span>
                  <button onclick="demoAlert()" class="btn btn-primary">立即報名</button>
              </div>
          </div>
      </div>

      <!-- 志工服務 -->
      <div id="volunteer" class="tab-content">
          <div class="card">
              <h3>🤝 志工服務</h3>
              <p>加入我們的志工行列，用愛心和行動幫助更多需要的人。</p>
          </div>

          <div class="activity-list">
              <div class="activity-item">
                  <h4>🤝 活動協助志工</h4>
                  <div class="meta">📅 2024-12-01 13:00-17:00 | 👥 需要 5 人</div>
                  <div class="description">協助健康講座的簽到、會場整理及活動進行</div>
                  <span class="status-badge status-active">開放報名</span>
                  <button onclick="demoAlert()" class="btn btn-primary">申請服務</button>
              </div>
              
              <div class="activity-item">
                  <h4>💝 陪伴服務志工</h4>
                  <div class="meta">📅 2024-12-08 09:30-12:30 | 👥 需要 3 人</div>
                  <div class="description">陪伴病友參與復健課程，提供情感支持</div>
                  <span class="status-badge status-active">開放報名</span>
                  <button onclick="demoAlert()" class="btn btn-primary">申請服務</button>
              </div>
          </div>
      </div>

      <!-- 愛心捐款 -->
      <div id="donation" class="tab-content">
          <div class="card">
              <h3>💝 愛心捐款</h3>
              <p>您的每一份愛心都將用於支持病友會的各項服務和活動。</p>
          </div>

          <form id="donationForm">
              <div class="form-row">
                  <div class="form-group">
                      <label for="donationAmount">捐款金額 *</label>
                      <input type="number" id="donationAmount" name="amount" required min="1" placeholder="請輸入捐款金額">
                  </div>
                  <div class="form-group">
                      <label for="donationCategory">捐款類別</label>
                      <select id="donationCategory" name="category">
                          <option value="一般捐款">一般捐款</option>
                          <option value="活動贊助">活動贊助</option>
                          <option value="設備購置">設備購置</option>
                          <option value="其他">其他</option>
                      </select>
                  </div>
              </div>

              <div class="form-group">
                  <label for="donationDescription">捐款說明</label>
                  <textarea id="donationDescription" name="description" rows="3" placeholder="請描述您的捐款用途或留言"></textarea>
              </div>

              <div class="form-group">
                  <label>
                      <input type="checkbox" id="needReceipt" name="needReceipt" value="TRUE">
                      需要捐款收據（可用於報稅）
                  </label>
              </div>

              <button type="submit" class="btn btn-primary">確認捐款</button>
          </form>
      </div>

      <!-- 管理功能 -->
      <div id="admin" class="tab-content">
          <div class="card">
              <h3>⚙️ 管理功能</h3>
              <p>管理員專用功能，包含會員審核、活動管理等。</p>
          </div>

          <div class="alert alert-info">
              <strong>示範模式：</strong>管理功能需要完整的後端設定才能使用。
          </div>
      </div>
  </div>

  <script>
      // 示範用的 API URL（需要替換為實際的 GAS Web App URL）
      const API_URL = 'https://script.google.com/macros/s/AKfycbww3oJgQTkUU94Gc12TJPSmIHw9LjdNVjlmIJUUPXQU2FCYFGs5cj4rnbf3cXwHMgElbQ/exec';
      let currentUser = null;
      let isAdmin = false;

      // 頁面載入完成後執行
      document.addEventListener('DOMContentLoaded', function() {
          bindFormEvents();
          initializePage();
      });

      // 綁定表單事件
      function bindFormEvents() {
          document.getElementById('registerForm').addEventListener('submit', handleRegister);
          document.getElementById('donationForm').addEventListener('submit', handleDonation);
      }

      // 切換標籤頁
      function showTab(tabName) {
          // 隱藏所有標籤內容
          const tabs = document.querySelectorAll('.tab-content');
          tabs.forEach(tab => tab.classList.remove('active'));
          
          // 移除所有標籤按鈕的活動狀態
          const navTabs = document.querySelectorAll('.nav-tab');
          navTabs.forEach(tab => tab.classList.remove('active'));
          
          // 顯示選中的標籤內容
          document.getElementById(tabName).classList.add('active');
          
          // 設置對應按鈕為活動狀態
          event.target.classList.add('active');
      }

      // 顯示訊息
      function showMessage(message, type = 'info') {
          const alertDiv = document.createElement('div');
          alertDiv.className = `alert alert-${type}`;
          alertDiv.textContent = message;
          
          // 插入到當前活動標籤的開頭
          const activeTab = document.querySelector('.tab-content.active');
          activeTab.insertBefore(alertDiv, activeTab.firstChild);
          
          // 3秒後自動移除
          setTimeout(() => {
              if (alertDiv.parentNode) {
                  alertDiv.parentNode.removeChild(alertDiv);
              }
          }, 3000);
      }

      // 示範警告
      function demoAlert() {
          showMessage('這是示範版本，請完成後端設定以使用完整功能。', 'info');
      }

      // 處理會員註冊（示範版）
      function handleRegister(event) {
          event.preventDefault();
          
          const formData = new FormData(event.target);
          const userData = Object.fromEntries(formData.entries());
          
          // 簡單驗證
          if (!userData.lineId || !userData.realName || !userData.memberType) {
              showMessage('請填寫必填欄位', 'error');
              return;
          }
          
          // 示範成功訊息
          showMessage('註冊資料已提交！在實際環境中，資料會儲存到 Google Sheets。', 'success');
          event.target.reset();
          
          // 儲存到本地存儲（示範用）
          localStorage.setItem('demoUser', JSON.stringify(userData));
      }

      // 處理捐款（示範版）
      function handleDonation(event) {
          event.preventDefault();
          
          const formData = new FormData(event.target);
          const donationData = Object.fromEntries(formData.entries());
          
          if (!donationData.amount || donationData.amount <= 0) {
              showMessage('請輸入有效的捐款金額', 'error');
              return;
          }
          
          showMessage(`感謝您的 $${donationData.amount} 元捐款！在實際環境中，會產生捐款記錄。`, 'success');
          event.target.reset();
      }

      // 初始化頁面
      function initializePage() {
          // 設定當前日期為活動日期的最小值
          const today = new Date().toISOString().split('T')[0];
          const dateInputs = document.querySelectorAll('input[type="date"]');
          dateInputs.forEach(input => {
              if (!input.value) {
                  input.min = today;
              }
          });

          // 載入示範用戶資料
          const demoUser = localStorage.getItem('demoUser');
          if (demoUser) {
              const userData = JSON.parse(demoUser);
              document.getElementById('lineId').value = userData.lineId || '';
          }
      }

      // 防止 JSON 解析錯誤
      window.addEventListener('error', function(e) {
          if (e.message.includes('JSON')) {
              console.log('JSON 解析錯誤已被忽略（可能來自瀏覽器擴充功能）');
              e.preventDefault();
          }
      });
  </script>
</body>
</html>
