<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç¡¬æ¼¢å¶ºé å¾éšŠ - å ±åçµ±è¨ˆè¡¨</title>
  <style>
      * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
      }
      
      body {
          font-family: 'Microsoft JhengHei', Arial, sans-serif;
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          min-height: 100vh;
          padding: 20px;
      }
      
      .container {
          max-width: 1200px;
          margin: 0 auto;
          background: white;
          border-radius: 20px;
          box-shadow: 0 20px 60px rgba(0,0,0,0.3);
          overflow: hidden;
      }
      
      .header {
          background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
          color: white;
          padding: 30px;
          text-align: center;
      }
      
      .header h1 {
          font-size: 2.5em;
          margin-bottom: 10px;
          text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
      }
      
      .header p {
          font-size: 1.1em;
          opacity: 0.9;
      }
      
      .content {
          padding: 30px;
      }
      
      .section {
          margin-bottom: 40px;
          background: #f8f9fa;
          padding: 25px;
          border-radius: 15px;
          border-left: 5px solid #667eea;
      }
      
      .section-title {
          font-size: 1.8em;
          color: #2c3e50;
          margin-bottom: 20px;
          display: flex;
          align-items: center;
          gap: 10px;
      }
      
      .section-title::before {
          content: 'ğŸ“‹';
          font-size: 1.2em;
      }
      
      .info-box {
          background: white;
          padding: 15px;
          border-radius: 10px;
          margin-bottom: 15px;
          box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      }
      
      .info-box h3 {
          color: #667eea;
          margin-bottom: 10px;
          font-size: 1.2em;
      }
      
      .info-item {
          display: flex;
          justify-content: space-between;
          padding: 8px 0;
          border-bottom: 1px solid #eee;
      }
      
      .info-item:last-child {
          border-bottom: none;
      }
      
      .label {
          font-weight: bold;
          color: #555;
      }
      
      .value {
          color: #333;
      }
      
      table {
          width: 100%;
          border-collapse: collapse;
          background: white;
          border-radius: 10px;
          overflow: hidden;
          box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      }
      
      th {
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          color: white;
          padding: 15px;
          text-align: left;
          font-weight: bold;
      }
      
      td {
          padding: 12px 15px;
          border-bottom: 1px solid #eee;
      }
      
      tr:hover {
          background: #f0f4ff;
      }
      
      input[type="text"], input[type="tel"], select {
          width: 100%;
          padding: 8px;
          border: 2px solid #ddd;
          border-radius: 5px;
          font-size: 14px;
          transition: all 0.3s;
      }
      
      input[type="text"]:focus, input[type="tel"]:focus, select:focus {
          outline: none;
          border-color: #667eea;
          box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
      }
      
      .btn {
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          color: white;
          padding: 12px 30px;
          border: none;
          border-radius: 25px;
          font-size: 16px;
          cursor: pointer;
          transition: all 0.3s;
          box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
      }
      
      .btn:hover {
          transform: translateY(-2px);
          box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
      }
      
      .btn-group {
          display: flex;
          gap: 15px;
          margin-top: 20px;
          flex-wrap: wrap;
      }
      
      .stats {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
          gap: 20px;
          margin-top: 20px;
      }
      
      .stat-card {
          background: white;
          padding: 20px;
          border-radius: 10px;
          text-align: center;
          box-shadow: 0 2px 10px rgba(0,0,0,0.1);
          border-top: 4px solid #667eea;
      }
      
      .stat-number {
          font-size: 2.5em;
          font-weight: bold;
          color: #667eea;
          margin: 10px 0;
      }
      
      .stat-label {
          color: #666;
          font-size: 1.1em;
      }
      
      .empty-slot {
          color: #999;
          font-style: italic;
      }
      
      .filled-slot {
          color: #27ae60;
          font-weight: bold;
      }
      
      @media (max-width: 768px) {
          .header h1 {
              font-size: 1.8em;
          }
          
          .section {
              padding: 15px;
          }
          
          table {
              font-size: 14px;
          }
          
          th, td {
              padding: 8px;
          }
      }
      
      .alert {
          background: #fff3cd;
          border-left: 4px solid #ffc107;
          padding: 15px;
          margin: 20px 0;
          border-radius: 5px;
      }
      
      .success {
          background: #d4edda;
          border-left: 4px solid #28a745;
      }
  </style>
</head>
<body>
  <div class="container">
      <div class="header">
          <h1>ğŸ”ï¸ ç¡¬æ¼¢å¶ºé å¾éšŠ</h1>
          <p>å ±åçµ±è¨ˆèˆ‡ä»»å‹™åˆ†é…è¡¨</p>
      </div>
      
      <div class="content">
          <!-- æŒ‡æ®ä¸­å¿ƒ -->
          <div class="section">
              <div class="section-title">æŒ‡æ®ä¸­å¿ƒ</div>
              <div class="info-box">
                  <div class="info-item">
                      <span class="label">ğŸ¯ ç¸½å¬é›†äºº</span>
                      <span class="value">é™³å»·åœ‹</span>
                  </div>
                  <div class="info-item">
                      <span class="label">ğŸ“± å‰¯å¬/è¯çµ¡äºº</span>
                      <span class="value">åŠ‰æ­£ç„ã€0936-893-693ã€‘</span>
                  </div>
              </div>
          </div>
          
          <!-- ç™»å±±éšŠçµ„ -->
          <div class="section">
              <div class="section-title">ç™»å±±éšŠçµ„</div>
              <table id="leaderTable">
                  <thead>
                      <tr>
                          <th>è·å‹™</th>
                          <th>è² è²¬äºº</th>
                          <th>ä¸»è¦ä»»å‹™</th>
                      </tr>
                  </thead>
                  <tbody>
                      <tr>
                          <td>ğŸ¥¾ å‰å°é ˜éšŠ</td>
                          <td><input type="text" value="é™³å»·åœ‹" id="leader1"></td>
                          <td>å¸¶é ˜éšŠä¼ã€æ§åˆ¶é€Ÿåº¦ã€è·¯ç·šåˆ¤æ–·</td>
                      </tr>
                      <tr>
                          <td>ğŸ¥¾ å£“éšŠé ˜éšŠ</td>
                          <td><input type="text" placeholder="è«‹è¼¸å…¥å§“å" id="leader2"></td>
                          <td>ç¢ºä¿ç„¡äººè½å–®ã€å”åŠ©è½å¾Œè€…</td>
                      </tr>
                      <tr>
                          <td>ğŸ¥¾ ä¸­æ®µå”èª¿</td>
                          <td><input type="text" placeholder="è«‹è¼¸å…¥å§“å" id="leader3"></td>
                          <td>ç¶­æŒéšŠä¼å®Œæ•´ã€ä¸Šä¸‹è¯çµ¡</td>
                      </tr>
                  </tbody>
              </table>
          </div>
          
          <!-- é—œæ‡·çµ„é…å° -->
          <div class="section">
              <div class="section-title">é—œæ‡·çµ„é…å°</div>
              <p style="margin-bottom: 15px; color: #666;">è«‹ç‚ºæ¯ä½å¸•å‹å®‰æ’ä¸€ä½é—œæ‡·å“¡</p>
              <table id="careTable">
                  <thead>
                      <tr>
                          <th style="width: 50px;">ç·¨è™Ÿ</th>
                          <th>é—œæ‡·å“¡</th>
                          <th>å¸•å‹</th>
                          <th>è¯çµ¡é›»è©±</th>
                      </tr>
                  </thead>
                  <tbody id="careTableBody">
                      <tr>
                          <td>1</td>
                          <td><input type="text" placeholder="é—œæ‡·å“¡å§“å"></td>
                          <td><input type="text" placeholder="å¸•å‹å§“å"></td>
                          <td><input type="tel" placeholder="è¯çµ¡é›»è©±"></td>
                      </tr>
                      <tr>
                          <td>2</td>
                          <td><input type="text" placeholder="é—œæ‡·å“¡å§“å"></td>
                          <td><input type="text" placeholder="å¸•å‹å§“å"></td>
                          <td><input type="tel" placeholder="è¯çµ¡é›»è©±"></td>
                      </tr>
                      <tr>
                          <td>3</td>
                          <td><input type="text" placeholder="é—œæ‡·å“¡å§“å"></td>
                          <td><input type="text" placeholder="å¸•å‹å§“å"></td>
                          <td><input type="tel" placeholder="è¯çµ¡é›»è©±"></td>
                      </tr>
                      <tr>
                          <td>4</td>
                          <td><input type="text" placeholder="é—œæ‡·å“¡å§“å"></td>
                          <td><input type="text" placeholder="å¸•å‹å§“å"></td>
                          <td><input type="tel" placeholder="è¯çµ¡é›»è©±"></td>
                      </tr>
                      <tr>
                          <td>5</td>
                          <td><input type="text" placeholder="é—œæ‡·å“¡å§“å"></td>
                          <td><input type="text" placeholder="å¸•å‹å§“å"></td>
                          <td><input type="tel" placeholder="è¯çµ¡é›»è©±"></td>
                      </tr>
                  </tbody>
              </table>
              <div class="btn-group">
                  <button class="btn" onclick="addCareRow()">â• æ–°å¢é…å°</button>
              </div>
          </div>
          
          <!-- äº¤é€šå®‰æ’ -->
          <div class="section">
              <div class="section-title">äº¤é€šå®‰æ’</div>
              
              <div class="info-box">
                  <h3>ğŸš— è‡ªè¡Œé–‹è»Šã€æ—…å®¢æœå‹™ä¸­å¿ƒé›†åˆã€‘</h3>
                  <table id="carTable">
                      <thead>
                          <tr>
                              <th style="width: 80px;">è»Šæ¬¡</th>
                              <th>é§•é§›</th>
                              <th>å¯è¼‰äººæ•¸</th>
                              <th>ä¹˜å®¢1</th>
                              <th>ä¹˜å®¢2</th>
                              <th>ä¹˜å®¢3</th>
                          </tr>
                      </thead>
                      <tbody id="carTableBody">
                          <tr>
                              <td>è»Š1</td>
                              <td><input type="text" value="åŠ‰æ­£ç„"></td>
                              <td><input type="text" value="3" style="width: 60px;"></td>
                              <td><input type="text" placeholder="ä¹˜å®¢å§“å"></td>
                              <td><input type="text" placeholder="ä¹˜å®¢å§“å"></td>
                              <td><input type="text" placeholder="ä¹˜å®¢å§“å"></td>
                          </tr>
                      </tbody>
                  </table>
                  <div class="btn-group">
                      <button class="btn" onclick="addCarRow()">â• æ–°å¢è»Šè¼›</button>
                  </div>
              </div>
              
              <div class="info-box" style="margin-top: 20px;">
                  <h3>ğŸš‡ å¤§çœ¾é‹è¼¸ã€æ·é‹æ·¡æ°´ç«™é›†åˆã€‘</h3>
                  <table id="mrtTable">
                      <thead>
                          <tr>
                              <th style="width: 80px;">ç·¨è™Ÿ</th>
                              <th>å§“å</th>
                              <th>è¯çµ¡é›»è©±</th>
                              <th>å‚™è¨»</th>
                          </tr>
                      </thead>
                      <tbody id="mrtTableBody">
                          <tr>
                              <td>1</td>
                              <td><input type="text" value="æ´ªæš"></td>
                              <td><input type="tel" placeholder="è¯çµ¡é›»è©±"></td>
                              <td><input type="text" placeholder="å‚™è¨»"></td>
                          </tr>
                      </tbody>
                  </table>
                  <div class="btn-group">
                      <button class="btn" onclick="addMrtRow()">â• æ–°å¢æ­ä¹˜è€…</button>
                  </div>
              </div>
          </div>
          
          <!-- åˆé¤çµ±è¨ˆ -->
          <div class="section">
              <div class="section-title">åˆé¤çµ±è¨ˆ</div>
              <div class="alert">
                  <strong>ğŸ“ ç”¨é¤åœ°é»ï¼š</strong>ç¢§ç‘¤å±±èŠåœŸé›åŸ<br>
                  <strong>â° é›†åˆæ™‚é–“ï¼š</strong>æ”»é ‚å¾Œä¸‹å±±åœ¨éŠå®¢ä¸­å¿ƒé›†åˆ<br>
                  <strong>ğŸ’¡ æé†’ï¼š</strong>éœ€å…ˆçµ±è¨ˆäººæ•¸è¨‚æ¡Œï¼Œè«‹ç¢ºå¯¦å¡«å¯«
              </div>
              
              <table id="lunchTable">
                  <thead>
                      <tr>
                          <th style="width: 80px;">ç·¨è™Ÿ</th>
                          <th>å§“å</th>
                          <th>ç”¨é¤äººæ•¸</th>
                          <th>é£²é£Ÿé™åˆ¶</th>
                          <th>è¯çµ¡é›»è©±</th>
                      </tr>
                  </thead>
                  <tbody id="lunchTableBody">
                      <tr>
                          <td>1</td>
                          <td><input type="text" value="æç›ˆè¯"></td>
                          <td><input type="text" value="1" style="width: 60px;"></td>
                          <td><input type="text" placeholder="å¦‚ï¼šç´ é£Ÿ"></td>
                          <td><input type="tel" placeholder="è¯çµ¡é›»è©±"></td>
                      </tr>
                      <tr>
                          <td>2</td>
                          <td><input type="text" value="æ´ªæš"></td>
                          <td><input type="text" value="1" style="width: 60px;"></td>
                          <td><input type="text" placeholder="å¦‚ï¼šç´ é£Ÿ"></td>
                          <td><input type="tel" placeholder="è¯çµ¡é›»è©±"></td>
                      </tr>
                      <tr>
                          <td>3</td>
                          <td><input type="text" value="æœµæ‹‰"></td>
                          <td><input type="text" value="2" style="width: 60px;"></td>
                          <td><input type="text" placeholder="å¦‚ï¼šç´ é£Ÿ"></td>
                          <td><input type="tel" placeholder="è¯çµ¡é›»è©±"></td>
                      </tr>
                      <tr>
                          <td>4</td>
                          <td><input type="text" value="åŠ‰æ­£ç„"></td>
                          <td><input type="text" value="1" style="width: 60px;"></td>
                          <td><input type="text" placeholder="å¦‚ï¼šç´ é£Ÿ"></td>
                          <td><input type="tel" placeholder="è¯çµ¡é›»è©±"></td>
                      </tr>
                  </tbody>
              </table>
              <div class="btn-group">
                  <button class="btn" onclick="addLunchRow()">â• æ–°å¢ç”¨é¤è€…</button>
                  <button class="btn" onclick="calculateLunch()">ğŸ“Š è¨ˆç®—ç¸½äººæ•¸</button>
              </div>
              
              <div class="stats" id="lunchStats" style="display: none; margin-top: 20px;">
                  <div class="stat-card">
                      <div class="stat-label">ç”¨é¤ç¸½äººæ•¸</div>
                      <div class="stat-number" id="totalLunch">0</div>
                  </div>
                  <div class="stat-card">
                      <div class="stat-label">å ±åçµ„æ•¸</div>
                      <div class="stat-number" id="totalGroups">0</div>
                  </div>
                  <div class="stat-card">
                      <div class="stat-label">å»ºè­°æ¡Œæ•¸</div>
                      <div class="stat-number" id="tableCount">0</div>
                  </div>
              </div>
          </div>
          
          <!-- æ•´é«”çµ±è¨ˆ -->
          <div class="section">
              <div class="section-title">æ•´é«”çµ±è¨ˆ</div>
              <div class="stats">
                  <div class="stat-card">
                      <div class="stat-label">ç¸½åƒåŠ äººæ•¸</div>
                      <div class="stat-number">23</div>
                  </div>
                  <div class="stat-card">
                      <div class="stat-label">è‡ªè¡Œé–‹è»Š</div>
                      <div class="stat-number" id="carCount">1</div>
                  </div>
                  <div class="stat-card">
                      <div class="stat-label">æ­ä¹˜æ·é‹</div>
                      <div class="stat-number" id="mrtCount">1</div>
                  </div>
                  <div class="stat-card">
                      <div class="stat-label">é—œæ‡·çµ„é…å°</div>
                      <div class="stat-number" id="careCount">0</div>
                  </div>
              </div>
          </div>
          
          <!-- æ“ä½œæŒ‰éˆ• -->
          <div class="btn-group" style="justify-content: center;">
              <button class="btn" onclick="saveData()">ğŸ’¾ å„²å­˜è³‡æ–™</button>
              <button class="btn" onclick="exportData()">ğŸ“¤ åŒ¯å‡ºçµ±è¨ˆ</button>
              <button class="btn" onclick="printPage()">ğŸ–¨ï¸ åˆ—å°</button>
          </div>
      </div>
  </div>
  
  <script>
      let carCounter = 1;
      let mrtCounter = 1;
      let lunchCounter = 4;
      
      function addCarRow() {
          carCounter++;
          const tbody = document.getElementById('carTableBody');
          const row = tbody.insertRow();
          row.innerHTML = `
              <td>è»Š${carCounter}</td>
              <td><input type="text" placeholder="é§•é§›å§“å"></td>
              <td><input type="text" placeholder="äººæ•¸" style="width: 60px;"></td>
              <td><input type="text" placeholder="ä¹˜å®¢å§“å"></td>
              <td><input type="text" placeholder="ä¹˜å®¢å§“å"></td>
              <td><input type="text" placeholder="ä¹˜å®¢å§“å"></td>
          `;
          updateCarCount();
      }
      
      function addMrtRow() {
          mrtCounter++;
          const tbody = document.getElementById('mrtTableBody');
          const row = tbody.insertRow();
          row.innerHTML = `
              <td>${mrtCounter}</td>
              <td><input type="text" placeholder="å§“å"></td>
              <td><input type="tel" placeholder="è¯çµ¡é›»è©±"></td>
              <td><input type="text" placeholder="å‚™è¨»"></td>
          `;
          updateMrtCount();
      }
      
      function addLunchRow() {
          lunchCounter++;
          const tbody = document.getElementById('lunchTableBody');
          const row = tbody.insertRow();
          row.innerHTML = `
              <td>${lunchCounter}</td>
              <td><input type="text" placeholder="å§“å"></td>
              <td><input type="text" placeholder="äººæ•¸" style="width: 60px;"></td>
              <td><input type="text" placeholder="å¦‚ï¼šç´ é£Ÿ"></td>
              <td><input type="tel" placeholder="è¯çµ¡é›»è©±"></td>
          `;
      }
      
      function addCareRow() {
          const tbody = document.getElementById('careTableBody');
          const rowCount = tbody.rows.length + 1;
          const row = tbody.insertRow();
          row.innerHTML = `
              <td>${rowCount}</td>
              <td><input type="text" placeholder="é—œæ‡·å“¡å§“å"></td>
              <td><input type="text" placeholder="å¸•å‹å§“å"></td>
              <td><input type="tel" placeholder="è¯çµ¡é›»è©±"></td>
          `;
          updateCareCount();
      }
      
      function calculateLunch() {
          const tbody = document.getElementById('lunchTableBody');
          let totalPeople = 0;
          let totalGroups = 0;
          
          for (let row of tbody.rows) {
              const nameInput = row.cells[1].querySelector('input').value;
              const countInput = row.cells[2].querySelector('input').value;
              
              if (nameInput && countInput) {
                  totalPeople += parseInt(countInput) || 0;
                  totalGroups++;
              }
          }
          
          const tableCount = Math.ceil(totalPeople / 10);
          
          document.getElementById('totalLunch').textContent = totalPeople;
          document.getElementById('totalGroups').textContent = totalGroups;
          document.getElementById('tableCount').textContent = tableCount;
          document.getElementById('lunchStats').style.display = 'grid';
      }
      
      function updateCarCount() {
          document.getElementById('carCount').textContent = carCounter;
      }
      
      function updateMrtCount() {
          document.getElementById('mrtCount').textContent = mrtCounter;
      }
      
      function updateCareCount() {
          const tbody = document.getElementById('careTableBody');
          let count = 0;
          for (let row of tbody.rows) {
              const carerInput = row.cells[1].querySelector('input').value;
              const patientInput = row.cells[2].querySelector('input').value;
              if (carerInput && patientInput) {
                  count++;
              }
          }
          document.getElementById('careCount').textContent = count;
      }
      
      function saveData() {
          const data = {
              leaders: {
                  leader1: document.getElementById('leader1').value,
                  leader2: document.getElementById('leader2').value,
                  leader3: document.getElementById('leader3').value
              },
              timestamp: new Date().toLocaleString('zh-TW')
          };
          
          localStorage.setItem('hikingData', JSON.stringify(data));
          alert('âœ… è³‡æ–™å·²å„²å­˜ï¼');
      }
      
      function exportData() {
          calculateLunch();
          let text = 'ç¡¬æ¼¢å¶ºé å¾éšŠ - çµ±è¨ˆå ±è¡¨\n';
          text += '='.repeat(50) + '\n\n';
          
          text += 'ã€æŒ‡æ®ä¸­å¿ƒã€‘\n';
          text += 'ç¸½å¬é›†äºº: é™³å»·åœ‹\n';
          text += 'å‰¯å¬/è¯çµ¡äºº: åŠ‰æ­£ç„ (0936-893-693)\n\n';
          
          text += 'ã€ç™»å±±éšŠçµ„ã€‘\n';
          text += `å‰å°é ˜éšŠ: ${document.getElementById('leader1').value}\n`;
          text += `å£“éšŠé ˜éšŠ: ${document.getElementById('leader2').value}\n`;
          text += `ä¸­æ®µå”èª¿: ${document.getElementById('leader3').value}\n\n`;
          
          text += 'ã€åˆé¤çµ±è¨ˆã€‘\n';
          text += `ç”¨é¤ç¸½äººæ•¸: ${document.getElementById('totalLunch').textContent}\n`;
          text += `å ±åçµ„æ•¸: ${document.getElementById('totalGroups').textContent}\n`;
          text += `å»ºè­°æ¡Œæ•¸: ${document.getElementById('tableCount').textContent}\n\n`;
          
          text += 'åŒ¯å‡ºæ™‚é–“: ' + new Date().toLocaleString('zh-TW');
          
          const blob = new Blob([text], { type: 'text/plain;charset=utf-8' });
          const url = URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.href = url;
          a.download = 'ç¡¬æ¼¢å¶ºé å¾éšŠçµ±è¨ˆ.txt';
          a.click();
      }
      
      function printPage() {
          window.print();
      }
      
      // è¼‰å…¥å„²å­˜çš„è³‡æ–™
      window.onload = function() {
          const savedData = localStorage.getItem('hikingData');
          if (savedData) {
              const data = JSON.parse(savedData);
              if (data.leaders) {
                  document.getElementById('leader1').value = data.leaders.leader1 || '';
                  document.getElementById('leader2').value = data.leaders.leader2 || '';
                  document.getElementById('leader3').value = data.leaders.leader3 || '';
              }
          }
      };
      
      // ç›£è½è¼¸å…¥è®ŠåŒ–
      document.addEventListener('input', function() {
          updateCareCount();
      });
  </script>
</body>
</html>
