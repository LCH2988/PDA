<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>帕金森協會管理系統</title>
  <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Noto Sans TC', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }
    
    .container {
      max-width: 500px;
      margin: 0 auto;
      background: white;
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
    }
    
    h1 {
      color: #667eea;
      text-align: center;
      margin-bottom: 10px;
      font-size: 24px;
    }
    
    .subtitle {
      text-align: center;
      color: #666;
      margin-bottom: 30px;
      font-size: 14px;
    }
    
    .form-group {
      margin-bottom: 20px;
    }
    
    label {
      display: block;
      margin-bottom: 8px;
      color: #333;
      font-weight: 500;
    }
    
    input, select {
      width: 100%;
      padding: 12px;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      font-size: 16px;
      transition: border-color 0.3s;
    }
    
    input:focus, select:focus {
      outline: none;
      border-color: #667eea;
    }
    
    .btn {
      width: 100%;
      padding: 14px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s;
      margin-top: 10px;
    }
    
    .btn:hover {
      transform: translateY(-2px);
    }
    
    .btn-secondary {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    }
    
    .hidden {
      display: none;
    }
    
    .menu-item {
      padding: 15px;
      margin: 10px 0;
      background: #f8f9fa;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .menu-item:hover {
      background: #667eea;
      color: white;
      transform: translateX(5px);
    }
    
    .user-info {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
    }
    
    .user-info p {
      margin: 5px 0;
      color: #555;
    }
    
    .role-badge {
      display: inline-block;
      padding: 5px 15px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      color: white;
    }
    
    .role-member { background: #4CAF50; }
    .role-volunteer { background: #2196F3; }
    .role-manager { background: #FF9800; }
    
    .loading {
      text-align: center;
      padding: 20px;
      color: #667eea;
    }
    
    .tab-buttons {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }
    
    .tab-btn {
      flex: 1;
      padding: 10px;
      background: #e0e0e0;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
    }
    
    .tab-btn.active {
      background: #667eea;
      color: white;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- 載入畫面 -->
    <div id="loadingScreen" class="loading">
      <h2>載入中...</h2>
      <p>請稍候</p>
    </div>
    
    <!-- 註冊畫面 -->
    <div id="registerScreen" class="hidden">
      <h1>🏥 帕金森協會</h1>
      <p class="subtitle">會員註冊</p>
      
      <form id="registerForm">
        <div class="form-group">
          <label>LINE 名稱</label>
          <input type="text" id="displayName" readonly>
        </div>
        
        <div class="form-group">
          <label>真實姓名 *</label>
          <input type="text" id="realName" required placeholder="請輸入真實姓名">
        </div>
        
        <div class="form-group">
          <label>電話號碼 *</label>
          <input type="tel" id="phone" required placeholder="0912345678">
        </div>
        
        <div class="form-group">
          <label>設定密碼 *</label>
          <input type="password" id="password" required placeholder="至少6個字元">
        </div>
        
        <div class="form-group">
          <label>確認密碼 *</label>
          <input type="password" id="confirmPassword" required placeholder="再次輸入密碼">
        </div>
        
        <div class="form-group">
          <label>身分類型 *</label>
          <select id="role" required>
            <option value="member">一般成員</option>
            <option value="volunteer">志工成員</option>
          </select>
        </div>
        
        <button type="submit" class="btn">註冊</button>
      </form>
    </div>
    
    <!-- 登入畫面 -->
    <div id="loginScreen" class="hidden">
      <h1>🏥 帕金森協會</h1>
      <p class="subtitle">會員登入</p>
      
      <div class="tab-buttons">
        <button class="tab-btn active" onclick="switchLoginTab('line')">LINE 登入</button>
        <button class="tab-btn" onclick="switchLoginTab('phone')">電話登入</button>
      </div>
      
      <div id="lineLoginTab">
        <p style="text-align: center; color: #666; margin: 20px 0;">
          使用您的 LINE 帳號快速登入
        </p>
        <button class="btn" onclick="lineLogin()">LINE 快速登入</button>
      </div>
      
      <div id="phoneLoginTab" class="hidden">
        <form id="phoneLoginForm">
          <div class="form-group">
            <label>電話號碼</label>
            <input type="tel" id="loginPhone" required placeholder="0912345678">
          </div>
          
          <div class="form-group">
            <label>密碼</label>
            <input type="password" id="loginPassword" required placeholder="請輸入密碼">
          </div>
          
          <button type="submit" class="btn">登入</button>
        </form>
      </div>
    </div>
    
    <!-- 主選單畫面 -->
    <div id="mainScreen" class="hidden">
      <h1>🏥 帕金森協會</h1>
      <p class="subtitle">會員系統</p>
      
      <div class="user-info">
        <p><strong>姓名：</strong><span id="userName"></span></p>
        <p><strong>身分：</strong><span id="userRole"></span></p>
      </div>
      
      <div id="menuContainer"></div>
      
      <button class="btn btn-secondary" onclick="logout()" style="margin-top: 20px;">登出</button>
    </div>
  </div>

  <script>
    // 設定
    const LIFF_ID = '1656516134-VaGgmaPm'; // 請替換為您的 LIFF ID
    const GAS_URL = 'https://script.google.com/macros/s/AKfycbwG-jrdCJ4IZzGLue5PaHgLDkuFqRU8XYjx6YxAkfaQxCH8ZUU7XF2NcVHl6gqCpfbcFw/exec'; // 請替換為您的 GAS Web App URL
    
    let liffProfile = null;
    let currentUser = null;
    
    // 初始化 LIFF
    window.onload = async function() {
      try {
        await liff.init({ liffId: LIFF_ID });
        
        if (!liff.isLoggedIn()) {
          liff.login();
          return;
        }
        
        liffProfile = await liff.getProfile();
        checkUserStatus();
        
      } catch (error) {
        console.error('LIFF 初始化失敗:', error);
        alert('系統初始化失敗，請重新開啟');
      }
    };
    
    // 檢查使用者狀態
    async function checkUserStatus() {
      try {
        const response = await fetch(GAS_URL, {
          method: 'POST',
          body: JSON.stringify({
            action: 'getUserInfo',
            userId: liffProfile.userId
          })
        });
        
        const result = await response.json();
        
        if (result.success) {
          // 已註冊，顯示主選單
          currentUser = result.data;
          showMainScreen();
        } else {
          // 未註冊，顯示註冊畫面
          showRegisterScreen();
        }
        
      } catch (error) {
        console.error('檢查使用者狀態失敗:', error);
        alert('系統錯誤，請稍後再試');
      }
      
      document.getElementById('loadingScreen').classList.add('hidden');
    }
    
    // 顯示註冊畫面
    function showRegisterScreen() {
      document.getElementById('registerScreen').classList.remove('hidden');
      document.getElementById('displayName').value = liffProfile.displayName;
    }
    
    // 註冊表單提交
    document.getElementById('registerForm').addEventListener('submit', async function(e) {
      e.preventDefault();
      
      const password = document.getElementById('password').value;
      const confirmPassword = document.getElementById('confirmPassword').value;
      
      if (password.length < 6) {
        alert('密碼至少需要6個字元');
        return;
      }
      
      if (password !== confirmPassword) {
        alert('兩次密碼輸入不一致');
        return;
      }
      
      try {
        const response = await fetch(GAS_URL, {
          method: 'POST',
          body: JSON.stringify({
            action: 'register',
            userId: liffProfile.userId,
            displayName: liffProfile.displayName,
            phone: document.getElementById('phone').value,
            name: document.getElementById('realName').value,
            password: password,
            role: document.getElementById('role').value
          })
        });
        
        const result = await response.json();
        
        if (result.success) {
          alert('註冊成功！');
          currentUser = result.data;
          document.getElementById('registerScreen').classList.add('hidden');
          showMainScreen();
        } else {
          alert('註冊失敗：' + result.message);
        }
        
      } catch (error) {
        console.error('註冊失敗:', error);
        alert('系統錯誤，請稍後再試');
      }
    });
    
    // 切換登入方式
    function switchLoginTab(type) {
      const tabs = document.querySelectorAll('.tab-btn');
      tabs.forEach(tab => tab.classList.remove('active'));
      
      if (type === 'line') {
        tabs[0].classList.add('active');
        document.getElementById('lineLoginTab').classList.remove('hidden');
        document.getElementById('phoneLoginTab').classList.add('hidden');
      } else {
        tabs[1].classList.add('active');
        document.getElementById('lineLoginTab').classList.add('hidden');
        document.getElementById('phoneLoginTab').classList.remove('hidden');
      }
    }
    
    // LINE 快速登入
    async function lineLogin() {
      try {
        const response = await fetch(GAS_URL, {
          method: 'POST',
          body: JSON.stringify({
            action: 'login',
            loginType: 'line',
            userId: liffProfile.userId
          })
        });
        
        const result = await response.json();
        
        if (result.success) {
          currentUser = result.data;
          document.getElementById('loginScreen').classList.add('hidden');
          showMainScreen();
        } else {
          alert('登入失敗：' + result.message);
        }
        
      } catch (error) {
        console.error('登入失敗:', error);
        alert('系統錯誤，請稍後再試');
      }
    }
    
    // 電話密碼登入
    document.getElementById('phoneLoginForm').addEventListener('submit', async function(e) {
      e.preventDefault();
      
      try {
        const response = await fetch(GAS_URL, {
          method: 'POST',
          body: JSON.stringify({
            action: 'login',
            loginType: 'phone',
            phone: document.getElementById('loginPhone').value,
            password: document.getElementById('loginPassword').value
          })
        });
        
        const result = await response.json();
        
        if (result.success) {
          currentUser = result.data;
          document.getElementById('loginScreen').classList.add('hidden');
          showMainScreen();
        } else {
          alert('登入失敗：' + result.message);
        }
        
      } catch (error) {
        console.error('登入失敗:', error);
        alert('系統錯誤，請稍後再試');
      }
    });
    
    // 顯示主選單
    function showMainScreen() {
      document.getElementById('mainScreen').classList.remove('hidden');
      document.getElementById('userName').textContent = currentUser.name;
      
      const roleText = getRoleText(currentUser.role);
      const roleClass = 'role-' + currentUser.role;
      document.getElementById('userRole').innerHTML = 
        `<span class="role-badge ${roleClass}">${roleText}</span>`;
      
      renderMenu();
    }
    
    // 取得角色文字
    function getRoleText(role) {
      const roleMap = {
        'member': '一般成員',
        'volunteer': '志工成員',
        'manager': '管理人員'
      };
      return roleMap[role] || role;
    }
    
    // 渲染選單
    function renderMenu() {
      const menuContainer = document.getElementById('menuContainer');
      const menus = getMenuByRole(currentUser.role);
      
      menuContainer.innerHTML = menus.map(menu => `
        <div class="menu-item" onclick="navigateTo('${menu.action}')">
          <span>${menu.icon} ${menu.name}</span>
          <span>›</span>
        </div>
      `).join('');
    }
    
    // 根據角色取得選單
    function getMenuByRole(role) {
      const baseMenus = [
        { name: '個人資料', icon: '👤', action: 'profile' },
        { name: '協會公告', icon: '📢', action: 'announcements' },
        { name: '活動列表', icon: '📅', action: 'activities' }
      ];
      
      if (role === 'volunteer' || role === 'manager') {
        baseMenus.push(
          { name: '志工任務', icon: '🤝', action: 'volunteer-tasks' },
          { name: '服務記錄', icon: '📝', action: 'service-records' },
          { name: '時數統計', icon: '⏱️', action: 'hours-stats' }
        );
      }
      
      if (role === 'manager') {
        baseMenus.push(
          { name: '會員管理', icon: '👥', action: 'user-management' },
          { name: '活動管理', icon: '🎯', action: 'activity-management' },
          { name: '報表匯出', icon: '📊', action: 'reports' }
        );
      }
      
      return baseMenus;
    }
    
    // 導航功能
    function navigateTo(action) {
      switch(action) {
        case 'profile':
          showProfile();
          break;
        case 'announcements':
          showAnnouncements();
          break;
        case 'activities':
          showActivities();
          break;
        case 'volunteer-tasks':
          showVolunteerTasks();
          break;
        case 'service-records':
          showServiceRecords();
          break;
        case 'hours-stats':
          showHoursStats();
          break;
        case 'user-management':
          showUserManagement();
          break;
        case 'activity-management':
          showActivityManagement();
          break;
        case 'reports':
          showReports();
          break;
        default:
          alert('功能開發中');
      }
    }
    
    // 個人資料頁面
    function showProfile() {
      const html = `
        <div style="padding: 20px;">
          <h2 style="color: #667eea; margin-bottom: 20px;">個人資料</h2>
          <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-bottom: 10px;">
            <p><strong>姓名：</strong>${currentUser.name}</p>
            <p><strong>電話：</strong>${currentUser.phone}</p>
            <p><strong>LINE 名稱：</strong>${currentUser.displayName}</p>
            <p><strong>身分：</strong>${getRoleText(currentUser.role)}</p>
            <p><strong>註冊時間：</strong>${currentUser.registeredAt || '---'}</p>
          </div>
          <button class="btn" onclick="showMainScreen()">返回</button>
        </div>
      `;
      document.querySelector('.container').innerHTML = html;
    }
    
    // 協會公告頁面
    function showAnnouncements() {
      const html = `
        <div style="padding: 20px;">
          <h2 style="color: #667eea; margin-bottom: 20px;">📢 協會公告</h2>
          <div class="menu-item">
            <div>
              <strong>2025年度健康講座</strong>
              <p style="font-size: 12px; color: #666; margin-top: 5px;">2025-10-15</p>
              <p style="font-size: 14px; margin-top: 5px;">邀請專業醫師分享帕金森症照護知識</p>
            </div>
          </div>
          <div class="menu-item">
            <div>
              <strong>志工招募中</strong>
              <p style="font-size: 12px; color: #666; margin-top: 5px;">2025-10-10</p>
              <p style="font-size: 14px; margin-top: 5px;">歡迎有愛心的朋友加入我們的志工行列</p>
            </div>
          </div>
          <button class="btn" onclick="showMainScreen()">返回</button>
        </div>
      `;
      document.querySelector('.container').innerHTML = html;
    }
    
    // 活動列表頁面
    async function showActivities() {
      document.querySelector('.container').innerHTML = '<div class="loading"><h2>載入中...</h2></div>';
      
      try {
        const response = await fetch(GAS_URL, {
          method: 'POST',
          body: JSON.stringify({
            action: 'getActivities'
          })
        });
        
        const result = await response.json();
        
        if (result.success) {
          const activities = result.data.activities;
          let html = `
            <div style="padding: 20px;">
              <h2 style="color: #667eea; margin-bottom: 20px;">📅 活動列表</h2>
          `;
          
          if (activities.length === 0) {
            html += '<p style="text-align: center; color: #666;">目前沒有活動</p>';
          } else {
            activities.forEach(activity => {
              html += `
                <div class="menu-item">
                  <div>
                    <strong>${activity.activityName}</strong>
                    <p style="font-size: 12px; color: #666; margin-top: 5px;">
                      📅 ${activity.activityDate}
                    </p>
                    <p style="font-size: 14px; margin-top: 5px;">${activity.description}</p>
                  </div>
                </div>
              `;
            });
          }
          
          html += '<button class="btn" onclick="showMainScreen()">返回</button></div>';
          document.querySelector('.container').innerHTML = html;
        } else {
          alert('載入失敗：' + result.message);
          showMainScreen();
        }
      } catch (error) {
        console.error('載入活動失敗:', error);
        alert('系統錯誤');
        showMainScreen();
      }
    }
    
    // 志工任務頁面
    function showVolunteerTasks() {
      const html = `
        <div style="padding: 20px;">
          <h2 style="color: #667eea; margin-bottom: 20px;">🤝 志工任務</h2>
          <div class="menu-item">
            <div>
              <strong>活動場地佈置</strong>
              <p style="font-size: 12px; color: #666; margin-top: 5px;">需求人數：5人</p>
              <p style="font-size: 14px; margin-top: 5px;">時間：2025-10-20 09:00</p>
            </div>
            <button class="btn" style="width: auto; padding: 8px 20px; margin: 0;">報名</button>
          </div>
          <div class="menu-item">
            <div>
              <strong>活動接待服務</strong>
              <p style="font-size: 12px; color: #666; margin-top: 5px;">需求人數：3人</p>
              <p style="font-size: 14px; margin-top: 5px;">時間：2025-10-20 13:00</p>
            </div>
            <button class="btn" style="width: auto; padding: 8px 20px; margin: 0;">報名</button>
          </div>
          <button class="btn btn-secondary" onclick="showMainScreen()">返回</button>
        </div>
      `;
      document.querySelector('.container').innerHTML = html;
    }
    
    // 服務記錄頁面
    async function showServiceRecords() {
      document.querySelector('.container').innerHTML = '<div class="loading"><h2>載入中...</h2></div>';
      
      try {
        const response = await fetch(GAS_URL, {
          method: 'POST',
          body: JSON.stringify({
            action: 'getVolunteerRecords',
            userId: currentUser.userId
          })
        });
        
        const result = await response.json();
        
        if (result.success) {
          const records = result.data.records;
          let totalHours = 0;
          
          let html = `
            <div style="padding: 20px;">
              <h2 style="color: #667eea; margin-bottom: 20px;">📝 服務記錄</h2>
          `;
          
          if (records.length === 0) {
            html += '<p style="text-align: center; color: #666;">尚無服務記錄</p>';
          } else {
            records.forEach(record => {
              totalHours += parseFloat(record.serviceHours);
              html += `
                <div class="menu-item">
                  <div>
                    <strong>活動 ID: ${record.activityId}</strong>
                    <p style="font-size: 12px; color: #666; margin-top: 5px;">
                      日期：${record.serviceDate}
                    </p>
                    <p style="font-size: 14px; margin-top: 5px;">
                      服務時數：${record.serviceHours} 小時
                    </p>
                  </div>
                </div>
              `;
            });
            
            html += `
              <div style="background: #667eea; color: white; padding: 15px; border-radius: 10px; margin-top: 20px; text-align: center;">
                <h3>累計服務時數</h3>
                <h1 style="margin: 10px 0;">${totalHours} 小時</h1>
              </div>
            `;
          }
          
          html += '<button class="btn btn-secondary" onclick="showMainScreen()" style="margin-top: 20px;">返回</button></div>';
          document.querySelector('.container').innerHTML = html;
        } else {
          alert('載入失敗：' + result.message);
          showMainScreen();
        }
      } catch (error) {
        console.error('載入記錄失敗:', error);
        alert('系統錯誤');
        showMainScreen();
      }
    }
    
    // 時數統計頁面
    function showHoursStats() {
      showServiceRecords(); // 使用相同的顯示邏輯
    }
    
    // 會員管理頁面（管理員功能）
    async function showUserManagement() {
      document.querySelector('.container').innerHTML = '<div class="loading"><h2>載入中...</h2></div>';
      
      try {
        const response = await fetch(GAS_URL, {
          method: 'POST',
          body: JSON.stringify({
            action: 'getAllUsers',
            requestUserId: currentUser.userId
          })
        });
        
        const result = await response.json();
        
        if (result.success) {
          const users = result.data.users;
          
          let html = `
            <div style="padding: 20px;">
              <h2 style="color: #667eea; margin-bottom: 20px;">👥 會員管理</h2>
              <p style="margin-bottom: 15px;">總會員數：${users.length} 人</p>
          `;
          
          users.forEach(user => {
            const roleClass = 'role-' + user.role;
            const statusColor = user.status === 'active' ? '#4CAF50' : '#f44336';
            
            html += `
              <div class="menu-item" style="display: block;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                  <div>
                    <strong>${user.name}</strong>
                    <span class="role-badge ${roleClass}" style="margin-left: 10px;">
                      ${getRoleText(user.role)}
                    </span>
                  </div>
                  <span style="color: ${statusColor}; font-size: 12px;">●</span>
                </div>
                <p style="font-size: 12px; color: #666; margin-top: 5px;">
                  電話：${user.phone}
                </p>
                <p style="font-size: 12px; color: #666;">
                  註冊時間：${user.registeredAt}
                </p>
              </div>
            `;
          });
          
          html += '<button class="btn btn-secondary" onclick="showMainScreen()">返回</button></div>';
          document.querySelector('.container').innerHTML = html;
        } else {
          alert('載入失敗：' + result.message);
          showMainScreen();
        }
      } catch (error) {
        console.error('載入會員失敗:', error);
        alert('系統錯誤');
        showMainScreen();
      }
    }
    
    // 活動管理頁面（管理員功能）
    function showActivityManagement() {
      const html = `
        <div style="padding: 20px;">
          <h2 style="color: #667eea; margin-bottom: 20px;">🎯 活動管理</h2>
          <button class="btn" onclick="alert('新增活動功能開發中')">➕ 新增活動</button>
          <div style="margin-top: 20px;" id="activityList">
            <p style="text-align: center; color: #666;">載入中...</p>
          </div>
          <button class="btn btn-secondary" onclick="showMainScreen()" style="margin-top: 20px;">返回</button>
        </div>
      `;
      document.querySelector('.container').innerHTML = html;
      loadActivitiesForManagement();
    }
    
    async function loadActivitiesForManagement() {
      try {
        const response = await fetch(GAS_URL, {
          method: 'POST',
          body: JSON.stringify({
            action: 'getActivities'
          })
        });
        
        const result = await response.json();
        
        if (result.success) {
          const activities = result.data.activities;
          let html = '';
          
          if (activities.length === 0) {
            html = '<p style="text-align: center; color: #666;">目前沒有活動</p>';
          } else {
            activities.forEach(activity => {
              html += `
                <div class="menu-item" style="display: block;">
                  <strong>${activity.activityName}</strong>
                  <p style="font-size: 12px; color: #666; margin-top: 5px;">
                    日期：${activity.activityDate}
                  </p>
                  <p style="font-size: 14px; margin-top: 5px;">${activity.description}</p>
                  <div style="margin-top: 10px;">
                    <button class="btn" style="width: auto; padding: 8px 15px; margin-right: 10px; font-size: 14px;" 
                            onclick="alert('編輯功能開發中')">編輯</button>
                    <button class="btn btn-secondary" style="width: auto; padding: 8px 15px; font-size: 14px;" 
                            onclick="alert('刪除功能開發中')">刪除</button>
                  </div>
                </div>
              `;
            });
          }
          
          document.getElementById('activityList').innerHTML = html;
        }
      } catch (error) {
        console.error('載入活動失敗:', error);
        document.getElementById('activityList').innerHTML = 
          '<p style="text-align: center; color: #f44336;">載入失敗</p>';
      }
    }
    
    // 報表匯出頁面（管理員功能）
    function showReports() {
      const html = `
        <div style="padding: 20px;">
          <h2 style="color: #667eea; margin-bottom: 20px;">📊 報表匯出</h2>
          
          <div class="menu-item" onclick="alert('匯出會員清單功能開發中')">
            <span>📋 會員清單</span>
            <span>›</span>
          </div>
          
          <div class="menu-item" onclick="alert('匯出志工時數功能開發中')">
            <span>⏱️ 志工服務時數統計</span>
            <span>›</span>
          </div>
          
          <div class="menu-item" onclick="alert('匯出活動報表功能開發中')">
            <span>📅 活動參與報表</span>
            <span>›</span>
          </div>
          
          <div class="menu-item" onclick="alert('匯出月報表功能開發中')">
            <span>📈 月報表</span>
            <span>›</span>
          </div>
          
          <button class="btn btn-secondary" onclick="showMainScreen()">返回</button>
        </div>
      `;
      document.querySelector('.container').innerHTML = html;
    }
    
    // 登出功能
    function logout() {
      if (confirm('確定要登出嗎？')) {
        currentUser = null;
        liff.logout();
        window.location.reload();
      }
    }
  </script>
</body>
</html>
