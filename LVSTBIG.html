<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å¸•é‡‘æ£®å¤šå…ƒåŒ–è«–å£‡</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <style>
      * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
      }
      
      body {
          font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          min-height: 100vh;
          padding: 20px;
      }
      
      .container {
          max-width: 800px;
          margin: 0 auto;
          background: white;
          border-radius: 15px;
          box-shadow: 0 10px 30px rgba(0,0,0,0.2);
          overflow: hidden;
      }
      
      .header {
          background: linear-gradient(45deg, #4CAF50, #45a049);
          color: white;
          padding: 30px;
          text-align: center;
      }
      
      .header h1 {
          font-size: 2.5em;
          margin-bottom: 10px;
      }
      
      .header p {
          font-size: 1.1em;
          opacity: 0.9;
      }
      
      .nav-tabs {
          display: flex;
          background: #f8f9fa;
          border-bottom: 1px solid #dee2e6;
      }
      
      .nav-tab {
          flex: 1;
          padding: 15px;
          text-align: center;
          background: none;
          border: none;
          cursor: pointer;
          font-size: 16px;
          transition: all 0.3s;
      }
      
      .nav-tab.active {
          background: white;
          border-bottom: 3px solid #4CAF50;
          color: #4CAF50;
      }
      
      .content {
          padding: 30px;
      }
      
      .tab-content {
          display: none;
      }
      
      .tab-content.active {
          display: block;
      }
      
      .topic-card {
          background: #f8f9fa;
          border-radius: 10px;
          padding: 20px;
          margin-bottom: 20px;
          border-left: 4px solid #4CAF50;
          transition: transform 0.3s;
      }
      
      .topic-card:hover {
          transform: translateY(-2px);
          box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      }
      
      .topic-title {
          font-size: 1.3em;
          font-weight: bold;
          color: #333;
          margin-bottom: 10px;
      }
      
      .topic-meta {
          color: #666;
          font-size: 0.9em;
          margin-bottom: 15px;
      }
      
      .topic-content {
          line-height: 1.6;
          color: #555;
      }
      
      .btn {
          background: #4CAF50;
          color: white;
          border: none;
          padding: 12px 24px;
          border-radius: 25px;
          cursor: pointer;
          font-size: 16px;
          transition: all 0.3s;
          margin: 5px;
      }
      
      .btn:hover {
          background: #45a049;
          transform: translateY(-2px);
      }
      
      .btn-secondary {
          background: #6c757d;
      }
      
      .btn-secondary:hover {
          background: #5a6268;
      }
      
      .form-group {
          margin-bottom: 20px;
      }
      
      .form-group label {
          display: block;
          margin-bottom: 8px;
          font-weight: bold;
          color: #333;
      }
      
      .form-group input,
      .form-group textarea,
      .form-group select {
          width: 100%;
          padding: 12px;
          border: 2px solid #ddd;
          border-radius: 8px;
          font-size: 16px;
          transition: border-color 0.3s;
      }
      
      .form-group input:focus,
      .form-group textarea:focus,
      .form-group select:focus {
          outline: none;
          border-color: #4CAF50;
      }
      
      .reply-section {
          background: #e9ecef;
          border-radius: 8px;
          padding: 15px;
          margin-top: 15px;
      }
      
      .reply-item {
          background: white;
          padding: 15px;
          border-radius: 8px;
          margin-bottom: 10px;
          border-left: 3px solid #007bff;
      }
      
      .user-info {
          background: #e3f2fd;
          padding: 15px;
          border-radius: 8px;
          margin-bottom: 20px;
      }
      
      .status-indicator {
          display: inline-block;
          width: 12px;
          height: 12px;
          border-radius: 50%;
          margin-right: 8px;
      }
      
      .status-online {
          background: #4CAF50;
      }
      
      .status-offline {
          background: #ccc;
      }
      
      @media (max-width: 600px) {
          .nav-tabs {
              flex-direction: column;
          }
          
          .content {
              padding: 20px;
          }
          
          .header h1 {
              font-size: 2em;
          }
      }
  </style>
</head>
<body>
  <div class="container">
      <div class="header">
          <h1>ğŸŒŸ å¸•é‡‘æ£®å¤šå…ƒåŒ–è«–å£‡</h1>
          <p>é—œæ‡·ã€åˆ†äº«ã€äº’åŠ©çš„æº«æš–ç¤¾ç¾¤</p>
      </div>
      
      <div class="nav-tabs">
          <button class="nav-tab active" onclick="showTab('forum')">è«–å£‡é¦–é </button>
          <button class="nav-tab" onclick="showTab('create')">ç™¼è¡¨ä¸»é¡Œ</button>
          <button class="nav-tab" onclick="showTab('admin')">ç‰ˆä¸»ç®¡ç†</button>
          <button class="nav-tab" onclick="showTab('profile')">å€‹äººè³‡æ–™</button>
      </div>
      
      <div class="content">
          <!-- è«–å£‡é¦–é  -->
          <div id="forum" class="tab-content active">
              <div class="user-info">
                  <h3>ğŸ‘‹ æ­¡è¿å›ä¾†ï¼</h3>
                  <p><span class="status-indicator status-online"></span>æ‚¨å·²é€šéLINE LIFFé©—è­‰</p>
                  <p><strong>ç”¨æˆ¶åç¨±ï¼š</strong><span id="userName">è¼‰å…¥ä¸­...</span></p>
              </div>
              
              <h2>ğŸ“‹ æœ€æ–°è©±é¡Œ</h2>
              <div id="topicsList">
                  <div class="topic-card">
                      <div class="topic-title">ğŸ’Š æ–°è—¥ç‰©æ²»ç™‚ç¶“é©—åˆ†äº«</div>
                      <div class="topic-meta">ğŸ‘¤ å¼µé†«å¸« | ğŸ“… 2024-01-15 | ğŸ’¬ 12 å›è¦†</div>
                      <div class="topic-content">
                          æœ€è¿‘é–‹å§‹ä½¿ç”¨æ–°çš„å¸•é‡‘æ£®è—¥ç‰©ï¼Œæƒ³å’Œå¤§å®¶åˆ†äº«ä¸€äº›ä½¿ç”¨å¿ƒå¾—å’Œæ³¨æ„äº‹é …...
                      </div>
                      <button class="btn" onclick="viewTopic(1)">æŸ¥çœ‹è©³æƒ…</button>
                      <button class="btn btn-secondary" onclick="replyTopic(1)">å›è¦†</button>
                  </div>
                  
                  <div class="topic-card">
                      <div class="topic-title">ğŸƒâ€â™‚ï¸ é‹å‹•å¾©å¥åˆ†äº«</div>
                      <div class="topic-meta">ğŸ‘¤ æå¾©å¥å¸« | ğŸ“… 2024-01-14 | ğŸ’¬ 8 å›è¦†</div>
                      <div class="topic-content">
                          åˆ†äº«ä¸€äº›é©åˆå¸•é‡‘æ£®æ‚£è€…çš„é‹å‹•æ–¹å¼å’Œå¾©å¥æŠ€å·§ï¼Œå¸Œæœ›å°å¤§å®¶æœ‰å¹«åŠ©...
                      </div>
                      <button class="btn" onclick="viewTopic(2)">æŸ¥çœ‹è©³æƒ…</button>
                      <button class="btn btn-secondary" onclick="replyTopic(2)">å›è¦†</button>
                  </div>
                  
                  <div class="topic-card">
                      <div class="topic-title">ğŸ ç‡Ÿé¤Šé£²é£Ÿå»ºè­°</div>
                      <div class="topic-meta">ğŸ‘¤ ç‹ç‡Ÿé¤Šå¸« | ğŸ“… 2024-01-13 | ğŸ’¬ 15 å›è¦†</div>
                      <div class="topic-content">
                          å¸•é‡‘æ£®æ‚£è€…çš„é£²é£Ÿèª¿ç†éå¸¸é‡è¦ï¼Œé€™è£¡åˆ†äº«ä¸€äº›ç‡Ÿé¤Šæ­é…çš„å»ºè­°...
                      </div>
                      <button class="btn" onclick="viewTopic(3)">æŸ¥çœ‹è©³æƒ…</button>
                      <button class="btn btn-secondary" onclick="replyTopic(3)">å›è¦†</button>
                  </div>
              </div>
          </div>
          
          <!-- ç™¼è¡¨ä¸»é¡Œ -->
          <div id="create" class="tab-content">
              <h2>âœï¸ ç™¼è¡¨æ–°ä¸»é¡Œ</h2>
              <form id="createTopicForm">
                  <div class="form-group">
                      <label for="topicCategory">ğŸ“‚ ä¸»é¡Œåˆ†é¡</label>
                      <select id="topicCategory" required>
                          <option value="">è«‹é¸æ“‡åˆ†é¡</option>
                          <option value="medical">ğŸ’Š é†«ç™‚è³‡è¨Š</option>
                          <option value="rehabilitation">ğŸƒâ€â™‚ï¸ å¾©å¥é‹å‹•</option>
                          <option value="nutrition">ğŸ ç‡Ÿé¤Šé£²é£Ÿ</option>
                          <option value="psychology">ğŸ§  å¿ƒç†æ”¯æŒ</option>
                          <option value="daily">ğŸ  æ—¥å¸¸ç”Ÿæ´»</option>
                          <option value="experience">ğŸ’­ ç¶“é©—åˆ†äº«</option>
                      </select>
                  </div>
                  
                  <div class="form-group">
                      <label for="topicTitle">ğŸ“ ä¸»é¡Œæ¨™é¡Œ</label>
                      <input type="text" id="topicTitle" placeholder="è«‹è¼¸å…¥ä¸»é¡Œæ¨™é¡Œ..." required>
                  </div>
                  
                  <div class="form-group">
                      <label for="topicContent">ğŸ“„ å…§å®¹æè¿°</label>
                      <textarea id="topicContent" rows="6" placeholder="è«‹è©³ç´°æè¿°æ‚¨æƒ³åˆ†äº«çš„å…§å®¹..." required></textarea>
                  </div>
                  
                  <div class="form-group">
                      <label for="topicTags">ğŸ·ï¸ æ¨™ç±¤ (ç”¨é€—è™Ÿåˆ†éš”)</label>
                      <input type="text" id="topicTags" placeholder="ä¾‹å¦‚: è—¥ç‰©, å‰¯ä½œç”¨, ç¶“é©—åˆ†äº«">
                  </div>
                  
                  <button type="submit" class="btn">ğŸš€ ç™¼è¡¨ä¸»é¡Œ</button>
              </form>
          </div>
          
          <!-- ç‰ˆä¸»ç®¡ç† -->
          <div id="admin" class="tab-content">
              <h2>âš™ï¸ ç‰ˆä¸»ç®¡ç†é¢æ¿</h2>
              <div id="adminPanel">
                  <div class="topic-card">
                      <h3>ğŸ“Š è«–å£‡çµ±è¨ˆ</h3>
                      <p>ğŸ“ ç¸½ä¸»é¡Œæ•¸: <strong>156</strong></p>
                      <p>ğŸ’¬ ç¸½å›è¦†æ•¸: <strong>892</strong></p>
                      <p>ğŸ‘¥ æ´»èºç”¨æˆ¶: <strong>45</strong></p>
                      <p>ğŸ“… ä»Šæ—¥æ–°å¢: <strong>3</strong></p>
                  </div>
                  
                  <div class="topic-card">
                      <h3>ğŸ› ï¸ ç®¡ç†åŠŸèƒ½</h3>
                      <button class="btn" onclick="manageCategories()">ğŸ“‚ ç®¡ç†åˆ†é¡</button>
                      <button class="btn" onclick="manageUsers()">ğŸ‘¥ ç”¨æˆ¶ç®¡ç†</button>
                      <button class="btn" onclick="moderateContent()">ğŸ” å…§å®¹å¯©æ ¸</button>
                      <button class="btn" onclick="exportData()">ğŸ“Š åŒ¯å‡ºæ•¸æ“š</button>
                  </div>
                  
                  <div class="topic-card">
                      <h3>âš ï¸ å¾…è™•ç†äº‹é …</h3>
                      <div class="reply-item">
                          <strong>ğŸš¨ æª¢èˆ‰å…§å®¹:</strong> ç”¨æˆ¶å›å ±ä¸ç•¶è¨€è«–
                          <button class="btn btn-secondary" style="float: right;">è™•ç†</button>
                      </div>
                      <div class="reply-item">
                          <strong>ğŸ“ å¾…å¯©æ ¸:</strong> æ–°ç”¨æˆ¶ç”³è«‹åŠ å…¥
                          <button class="btn" style="float: right;">å¯©æ ¸</button>
                      </div>
                  </div>
              </div>
          </div>
          
          <!-- å€‹äººè³‡æ–™ -->
          <div id="profile" class="tab-content">
              <h2>ğŸ‘¤ å€‹äººè³‡æ–™è¨­å®š</h2>
              <form id="profileForm">
                  <div class="form-group">
                      <label for="displayName">ğŸ“› é¡¯ç¤ºåç¨±</label>
                      <input type="text" id="displayName" value="è¼‰å…¥ä¸­...">
                  </div>
                  
                  <div class="form-group">
                      <label for="userRole">ğŸ‘” èº«ä»½è§’è‰²</label>
                      <select id="userRole">
                          <option value="patient">ğŸ¤’ æ‚£è€…</option>
                          <option value="caregiver">ğŸ‘¨â€âš•ï¸ ç…§è­·è€…</option>
                          <option value="medical">ğŸ©º é†«ç™‚å°ˆæ¥­äººå“¡</option>
                          <option value="family">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å®¶å±¬</option>
                      </select>
                  </div>
                  
                  <div class="form-group">
                      <label for="interests">ğŸ¯ é—œæ³¨é ˜åŸŸ</label>
                      <div style="display: flex; flex-wrap: wrap; gap: 10px;">
                          <label><input type="checkbox" value="medical"> ğŸ’Š é†«ç™‚è³‡è¨Š</label>
                          <label><input type="checkbox" value="rehabilitation"> ğŸƒâ€â™‚ï¸ å¾©å¥é‹å‹•</label>
                          <label><input type="checkbox" value="nutrition"> ğŸ ç‡Ÿé¤Šé£²é£Ÿ</label>
                          <label><input type="checkbox" value="psychology"> ğŸ§  å¿ƒç†æ”¯æŒ</label>
                      </div>
                  </div>
                  
                  <div class="form-group">
                      <label for="notifications">ğŸ”” é€šçŸ¥è¨­å®š</label>
                      <div>
                          <label><input type="checkbox" checked> ğŸ“§ æ–°å›è¦†é€šçŸ¥</label><br>
                          <label><input type="checkbox" checked> ğŸ“± LINEæ¨é€é€šçŸ¥</label><br>
                          <label><input type="checkbox"> ğŸ“Š é€±å ±æ‘˜è¦</label>
                      </div>
                  </div>
                  
                  <button type="submit" class="btn">ğŸ’¾ å„²å­˜è¨­å®š</button>
              </form>
          </div>
      </div>
  </div>

  <script>
      // LIFFåˆå§‹åŒ–
      let liffId = '2001679903-O06mNaLy'; // è«‹æ›¿æ›ç‚ºå¯¦éš›çš„LIFF ID
      let userId = null;
      let userName = null;
      
      // åˆå§‹åŒ–LIFF
      async function initializeLiff() {
          try {
              await liff.init({ liffId: liffId });
              
              if (liff.isLoggedIn()) {
                  const profile = await liff.getProfile();
                  userId = profile.userId;
                  userName = profile.displayName;
                  
                  document.getElementById('userName').textContent = userName;
                  document.getElementById('displayName').value = userName;
              } else {
                  liff.login();
              }
          } catch (error) {
              console.error('LIFFåˆå§‹åŒ–å¤±æ•—:', error);
              // æ¨¡æ“¬æ•¸æ“šç”¨æ–¼æ¸¬è©¦
              userName = 'æ¸¬è©¦ç”¨æˆ¶';
              document.getElementById('userName').textContent = userName;
              document.getElementById('displayName').value = userName;
          }
      }
      
      // é é¢è¼‰å…¥æ™‚åˆå§‹åŒ–
      window.addEventListener('load', initializeLiff);
      
      // åˆ‡æ›æ¨™ç±¤é 
      function showTab(tabName) {
          // éš±è—æ‰€æœ‰æ¨™ç±¤å…§å®¹
          const contents = document.querySelectorAll('.tab-content');
          contents.forEach(content => content.classList.remove('active'));
          
          // ç§»é™¤æ‰€æœ‰æ¨™ç±¤çš„activeç‹€æ…‹
          const tabs = document.querySelectorAll('.nav-tab');
          tabs.forEach(tab => tab.classList.remove('active'));
          
          // é¡¯ç¤ºé¸ä¸­çš„æ¨™ç±¤å…§å®¹
          document.getElementById(tabName).classList.add('active');
          event.target.classList.add('active');
      }
      
      // GASå¾Œç«¯APIèª¿ç”¨
      const GAS_URL = 'https://script.google.com/macros/s/AKfycbxkiW-pSozig8mWHhuw_LySz70R55ASs55JNhk8m8qlMf5Z5llnBFBujogFjSJgsL8HOQ/exec'; // è«‹æ›¿æ›ç‚ºå¯¦éš›çš„GAS Web App URL
      
      // ç™¼è¡¨æ–°ä¸»é¡Œ
      document.getElementById('createTopicForm').addEventListener('submit', async function(e) {
          e.preventDefault();
          
          const topicData = {
              category: document.getElementById('topicCategory').value,
              title: document.getElementById('topicTitle').value,
              content: document.getElementById('topicContent').value,
              tags: document.getElementById('topicTags').value,
              userId: userId,
              userName: userName,
              timestamp: new Date().toISOString()
          };
          
          try {
              const response = await fetch(GAS_URL, {
                  method: 'POST',
                  headers: {
                      'Content-Type': 'application/json',
                  },
                  body: JSON.stringify({
                      action: 'createTopic',
                      data: topicData
                  })
              });
              
              const result = await response.json();
              
              if (result.success) {
                  alert('âœ… ä¸»é¡Œç™¼è¡¨æˆåŠŸï¼');
                  document.getElementById('createTopicForm').reset();
                  showTab('forum');
                  loadTopics(); // é‡æ–°è¼‰å…¥ä¸»é¡Œåˆ—è¡¨
                  
                  // ç™¼é€LINEé€šçŸ¥çµ¦ç¾¤çµ„
                  await sendLineNotification('æ–°ä¸»é¡Œç™¼è¡¨', topicData.title);
              } else {
                  alert('âŒ ç™¼è¡¨å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦');
              }
          } catch (error) {
              console.error('ç™¼è¡¨ä¸»é¡Œå¤±æ•—:', error);
              alert('âŒ ç¶²è·¯éŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦');
          }
      });
      
      // æŸ¥çœ‹ä¸»é¡Œè©³æƒ…
      function viewTopic(topicId) {
          // é€™è£¡å¯ä»¥é–‹å•Ÿä¸»é¡Œè©³æƒ…é é¢æˆ–æ¨¡æ…‹æ¡†
          alert(`æŸ¥çœ‹ä¸»é¡Œ ${topicId} çš„è©³ç´°å…§å®¹`);
      }
      
      // å›è¦†ä¸»é¡Œ
      async function replyTopic(topicId) {
          const replyContent = prompt('è«‹è¼¸å…¥æ‚¨çš„å›è¦†å…§å®¹:');
          
          if (replyContent && replyContent.trim()) {
              const replyData = {
                  topicId: topicId,
                  content: replyContent.trim(),
                  userId: userId,
                  userName: userName,
                  timestamp: new Date().toISOString()
              };
              
              try {
                  const response = await fetch(GAS_URL, {
                      method: 'POST',
                      headers: {
                          'Content-Type': 'application/json',
                      },
                      body: JSON.stringify({
                          action: 'replyTopic',
                          data: replyData
                      })
                  });
                  
                  const result = await response.json();
                  
                  if (result.success) {
                      alert('âœ… å›è¦†ç™¼è¡¨æˆåŠŸï¼');
                      
                      // ç™¼é€LINEé€šçŸ¥
                      await sendLineNotification('æ–°å›è¦†', `${userName} å›è¦†äº†æ‚¨çš„ä¸»é¡Œ`);
                  } else {
                      alert('âŒ å›è¦†å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦');
                  }
              } catch (error) {
                  console.error('å›è¦†å¤±æ•—:', error);
                  alert('âŒ ç¶²è·¯éŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦');
              }
          }
      }
      
      // ç™¼é€LINEé€šçŸ¥
      async function sendLineNotification(type, message) {
          try {
              if (liff.isLoggedIn()) {
                  await liff.sendMessages([{
                      type: 'text',
                      text: `ğŸ”” ${type}\n\n${message}\n\nä¾†è‡ªå¸•é‡‘æ£®å¤šå…ƒåŒ–è«–å£‡`
                  }]);
              }
          } catch (error) {
              console.error('LINEé€šçŸ¥ç™¼é€å¤±æ•—:', error);
          }
      }
      
      // è¼‰å…¥ä¸»é¡Œåˆ—è¡¨
      async function loadTopics() {
          try {
              const response = await fetch(`${GAS_URL}?action=getTopics`);
              const result = await response.json();
              
              if (result.success) {
                  updateTopicsList(result.data);
              }
          } catch (error) {
              console.error('è¼‰å…¥ä¸»é¡Œå¤±æ•—:', error);
          }
      }
      
      // æ›´æ–°ä¸»é¡Œåˆ—è¡¨é¡¯ç¤º
      function updateTopicsList(topics) {
          const topicsList = document.getElementById('topicsList');
          topicsList.innerHTML = '';
          
          topics.forEach(topic => {
              const topicCard = document.createElement('div');
              topicCard.className = 'topic-card';
              topicCard.innerHTML = `
                  <div class="topic-title">${topic.title}</div>
                  <div class="topic-meta">ğŸ‘¤ ${topic.userName} | ğŸ“… ${new Date(topic.timestamp).toLocaleDateString()} | ğŸ’¬ ${topic.replyCount || 0} å›è¦†</div>
                  <div class="topic-content">${topic.content.substring(0, 100)}...</div>
                  <button class="btn" onclick="viewTopic(${topic.id})">æŸ¥çœ‹è©³æƒ…</button>
                  <button class="btn btn-secondary" onclick="replyTopic(${topic.id})">å›è¦†</button>
              `;
              topicsList.appendChild(topicCard);
          });
      }
      
      // ç‰ˆä¸»ç®¡ç†åŠŸèƒ½
      function manageCategories() {
          alert('ğŸ“‚ åˆ†é¡ç®¡ç†åŠŸèƒ½é–‹ç™¼ä¸­...');
      }
      
      function manageUsers() {
          alert('ğŸ‘¥ ç”¨æˆ¶ç®¡ç†åŠŸèƒ½é–‹ç™¼ä¸­...');
      }
      
      function moderateContent() {
          alert('ğŸ” å…§å®¹å¯©æ ¸åŠŸèƒ½é–‹ç™¼ä¸­...');
      }
      
      function exportData() {
          alert('ğŸ“Š æ•¸æ“šåŒ¯å‡ºåŠŸèƒ½é–‹ç™¼ä¸­...');
      }
      
      // å„²å­˜å€‹äººè³‡æ–™
      document.getElementById('profileForm').addEventListener('submit', async function(e) {
          e.preventDefault();
          
          const profileData = {
              userId: userId,
              displayName: document.getElementById('displayName').value,
              role: document.getElementById('userRole').value,
              interests: Array.from(document.querySelectorAll('#interests input:checked')).map(cb => cb.value),
              notifications: {
                  reply: document.querySelector('input[type="checkbox"]:nth-of-type(1)').checked,
                  line: document.querySelector('input[type="checkbox"]:nth-of-type(2)').checked,
                  weekly: document.querySelector('input[type="checkbox"]:nth-of-type(3)').checked
              }
          };
          
          try {
              const response = await fetch(GAS_URL, {
                  method: 'POST',
                  headers: {
                      'Content-Type': 'application/json',
                  },
                  body: JSON.stringify({
                      action: 'updateProfile',
                      data: profileData
                  })
              });
              
              const result = await response.json();
              
              if (result.success) {
                  alert('âœ… å€‹äººè³‡æ–™æ›´æ–°æˆåŠŸï¼');
              } else {
                  alert('âŒ æ›´æ–°å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦');
              }
          } catch (error) {
              console.error('æ›´æ–°å€‹äººè³‡æ–™å¤±æ•—:', error);
              alert('âŒ ç¶²è·¯éŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦');
          }
      });
  </script>
</body>
</html>
