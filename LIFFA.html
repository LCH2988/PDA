<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æœƒå“¡å¤§æœƒæµ·å ±</title>
  <style>
      * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
      }
      
      body {
          font-family: 'Microsoft JhengHei', 'Arial', sans-serif;
          background: #f0f0f0;
          display: flex;
          justify-content: center;
          align-items: center;
          min-height: 100vh;
          padding: 20px;
      }
      
      .container {
          max-width: 1400px;
          display: flex;
          gap: 30px;
          flex-wrap: wrap;
      }
      
      .poster {
          width: 900px;
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          border-radius: 20px;
          box-shadow: 0 20px 60px rgba(0,0,0,0.3);
          padding: 50px;
          position: relative;
          overflow: hidden;
      }
      
      .poster::before {
          content: '';
          position: absolute;
          top: -50%;
          right: -50%;
          width: 100%;
          height: 100%;
          background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
      }
      
      .header {
          text-align: center;
          color: white;
          margin-bottom: 40px;
          position: relative;
          z-index: 1;
      }
      
      .organization-name {
          font-size: 38px;
          font-weight: bold;
          margin-bottom: 15px;
          text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
          letter-spacing: 3px;
      }
      
      .subtitle {
          font-size: 20px;
          opacity: 0.95;
          margin-bottom: 10px;
      }
      
      .main-content {
          background: white;
          border-radius: 15px;
          padding: 40px;
          margin-bottom: 30px;
          box-shadow: 0 10px 30px rgba(0,0,0,0.2);
          position: relative;
          z-index: 1;
      }
      
      .event-title {
          text-align: center;
          margin-bottom: 30px;
      }
      
      .event-title h1 {
          font-size: 42px;
          color: #667eea;
          margin-bottom: 10px;
          font-weight: bold;
      }
      
      .event-title .term {
          font-size: 28px;
          color: #764ba2;
          font-weight: bold;
      }
      
      .date-highlight {
          text-align: center;
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          color: white;
          padding: 30px;
          border-radius: 12px;
          margin: 30px 0;
      }
      
      .date-highlight .year {
          font-size: 28px;
          margin-bottom: 8px;
      }
      
      .date-highlight .date {
          font-size: 52px;
          font-weight: bold;
          letter-spacing: 5px;
      }
      
      .info-section {
          margin: 25px 0;
      }
      
      .section-title {
          font-size: 24px;
          color: #667eea;
          font-weight: bold;
          margin: 25px 0 15px 0;
          padding-bottom: 10px;
          border-bottom: 3px solid #667eea;
      }
      
      .info-item {
          margin: 15px 0;
          padding: 15px;
          background: linear-gradient(90deg, #f8f9ff 0%, #ffffff 100%);
          border-radius: 8px;
          border-left: 4px solid #667eea;
      }
      
      .info-label {
          font-size: 16px;
          color: #666;
          margin-bottom: 5px;
          font-weight: bold;
      }
      
      .info-value {
          font-size: 20px;
          color: #333;
          font-weight: bold;
      }
      
      .info-detail {
          font-size: 16px;
          color: #555;
          margin-top: 5px;
      }
      
      .fee-table {
          width: 100%;
          margin: 15px 0;
          border-collapse: collapse;
      }
      
      .fee-table tr {
          border-bottom: 1px solid #e0e0e0;
      }
      
      .fee-table td {
          padding: 12px 10px;
          font-size: 16px;
      }
      
      .fee-table td:first-child {
          color: #333;
          font-weight: 600;
          width: 60%;
      }
      
      .fee-table td:last-child {
          color: #667eea;
          font-weight: bold;
          font-size: 18px;
          text-align: right;
      }
      
      .bank-info {
          background: #f8f9ff;
          padding: 20px;
          border-radius: 10px;
          margin: 15px 0;
          border: 2px solid #667eea;
      }
      
      .bank-row {
          display: flex;
          margin: 10px 0;
          font-size: 16px;
      }
      
      .bank-label {
          color: #666;
          font-weight: bold;
          width: 100px;
          flex-shrink: 0;
      }
      
      .bank-value {
          color: #333;
          font-weight: bold;
          flex: 1;
      }
      
      .account-number {
          font-size: 20px;
          color: #667eea;
          letter-spacing: 2px;
      }
      
      .parking-info {
          background: #fff9e6;
          padding: 15px;
          border-radius: 8px;
          border-left: 4px solid #ffc107;
          margin: 15px 0;
      }
      
      .parking-info a {
          color: #667eea;
          text-decoration: none;
          font-weight: bold;
          word-break: break-all;
      }
      
      .parking-info a:hover {
          text-decoration: underline;
      }
      
      .footer {
          text-align: center;
          color: white;
          position: relative;
          z-index: 1;
          padding: 20px 0;
      }
      
      .footer-text {
          font-size: 20px;
          margin-bottom: 10px;
          text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
          font-weight: bold;
      }
      
      .decorative-circle {
          position: absolute;
          border-radius: 50%;
          background: rgba(255,255,255,0.1);
      }
      
      .circle-1 {
          width: 200px;
          height: 200px;
          top: 100px;
          left: -50px;
      }
      
      .circle-2 {
          width: 150px;
          height: 150px;
          bottom: 150px;
          right: -30px;
      }
      
      .circle-3 {
          width: 100px;
          height: 100px;
          top: 50%;
          left: -20px;
      }
      
      /* å ±åè¡¨å–®æ¨£å¼ */
      .registration-section {
          flex: 1;
          min-width: 400px;
      }
      
      .registration-form {
          background: white;
          border-radius: 15px;
          padding: 40px;
          box-shadow: 0 10px 30px rgba(0,0,0,0.2);
          margin-bottom: 30px;
      }
      
      .form-title {
          font-size: 32px;
          color: #667eea;
          font-weight: bold;
          margin-bottom: 25px;
          text-align: center;
      }
      
      .form-group {
          margin-bottom: 20px;
      }
      
      .form-group label {
          display: block;
          font-size: 16px;
          color: #333;
          font-weight: bold;
          margin-bottom: 8px;
      }
      
      .form-group input,
      .form-group select,
      .form-group textarea {
          width: 100%;
          padding: 12px;
          font-size: 16px;
          border: 2px solid #e0e0e0;
          border-radius: 8px;
          font-family: 'Microsoft JhengHei', 'Arial', sans-serif;
          transition: border-color 0.3s;
      }
      
      .form-group input:focus,
      .form-group select:focus,
      .form-group textarea:focus {
          outline: none;
          border-color: #667eea;
      }
      
      .form-group textarea {
          resize: vertical;
          min-height: 80px;
      }
      
      .radio-group {
          display: flex;
          flex-direction: column;
          gap: 10px;
      }
      
      .radio-option {
          display: flex;
          align-items: center;
          padding: 12px;
          background: #f8f9ff;
          border-radius: 8px;
          cursor: pointer;
          transition: background 0.3s;
      }
      
      .radio-option:hover {
          background: #e8ebff;
      }
      
      .radio-option input[type="radio"] {
          width: auto;
          margin-right: 10px;
          cursor: pointer;
      }
      
      .radio-option label {
          margin: 0;
          cursor: pointer;
          flex: 1;
      }
      
      .fee-display {
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          color: white;
          padding: 20px;
          border-radius: 10px;
          text-align: center;
          margin: 20px 0;
      }
      
      .fee-display .label {
          font-size: 16px;
          margin-bottom: 8px;
      }
      
      .fee-display .amount {
          font-size: 36px;
          font-weight: bold;
      }
      
      .submit-btn {
          width: 100%;
          padding: 15px;
          font-size: 18px;
          font-weight: bold;
          color: white;
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          border: none;
          border-radius: 10px;
          cursor: pointer;
          transition: transform 0.2s, box-shadow 0.2s;
      }
      
      .submit-btn:hover {
          transform: translateY(-2px);
          box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
      }
      
      .submit-btn:active {
          transform: translateY(0);
      }
      
      /* å ±åç‹€æ…‹é¡¯ç¤º */
      .registration-status {
          background: white;
          border-radius: 15px;
          padding: 30px;
          box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      }
      
      .status-title {
          font-size: 28px;
          color: #667eea;
          font-weight: bold;
          margin-bottom: 20px;
          text-align: center;
      }
      
      .status-stats {
          display: flex;
          gap: 15px;
          margin-bottom: 25px;
      }
      
      .stat-card {
          flex: 1;
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          color: white;
          padding: 20px;
          border-radius: 10px;
          text-align: center;
      }
      
      .stat-label {
          font-size: 14px;
          margin-bottom: 8px;
          opacity: 0.9;
      }
      
      .stat-number {
          font-size: 32px;
          font-weight: bold;
      }
      
      .registration-list {
          max-height: 400px;
          overflow-y: auto;
      }
      
      .registration-item {
          background: #f8f9ff;
          padding: 15px;
          border-radius: 8px;
          margin-bottom: 10px;
          border-left: 4px solid #667eea;
      }
      
      .registration-item .name {
          font-size: 18px;
          font-weight: bold;
          color: #333;
          margin-bottom: 5px;
      }
      
      .registration-item .details {
          font-size: 14px;
          color: #666;
      }
      
      .registration-item .fee {
          font-size: 16px;
          color: #667eea;
          font-weight: bold;
          margin-top: 5px;
      }
      
      .empty-state {
          text-align: center;
          padding: 40px;
          color: #999;
      }
      
      .success-message {
          background: #4caf50;
          color: white;
          padding: 15px;
          border-radius: 8px;
          margin-bottom: 20px;
          text-align: center;
          display: none;
      }
      
      @media (max-width: 1200px) {
          .container {
              flex-direction: column;
          }
          
          .poster {
              width: 100%;
          }
      }
  </style>
</head>
<body>
  <div class="container">
      <div class="poster">
          <div class="decorative-circle circle-1"></div>
          <div class="decorative-circle circle-2"></div>
          <div class="decorative-circle circle-3"></div>
          
          <div class="header">
              <div class="organization-name">å°ç£å¸•é‡‘æ£®ç—…å‹æ¬Šç›Šä¿ƒé€²æœƒ</div>
              <div class="subtitle">Taiwan Parkinson's Disease Association</div>
          </div>
          
          <div class="main-content">
              <div class="event-title">
                  <div class="term">ç¬¬å››å±†ç¬¬ä¸€æ¬¡</div>
                  <h1>æœƒå“¡å¤§æœƒ</h1>
              </div>
              
              <div class="date-highlight">
                  <div class="year">2025å¹´</div>
                  <div class="date">12æœˆ20æ—¥ï¼ˆå…­ï¼‰</div>
              </div>
              
              <div class="info-section">
                  <div class="section-title">ğŸ“ æ´»å‹•åœ°é»</div>
                  <div class="info-item">
                      <div class="info-value">æœæš®è‰¯è¾°</div>
                      <div class="info-detail">ğŸ“ å°ä¸­å¸‚å—å±¯å€æ–‡å¿ƒå—è·¯99è™Ÿ</div>
                      <div class="info-detail">ğŸš‡ æ·é‹è±æ¨‚å…¬åœ’ç«™</div>
                      <div class="info-detail">ğŸ“ (04) 3600-6000</div>
                  </div>
                  
                  <div class="parking-info">
                      <div class="info-label">ğŸš— åœè»Šè³‡è¨Š</div>
                      <div style="margin-top: 8px;">
                          <a href="https://www.yourhomewedding.com/archive/images/editor/faq/10dd58e528ba79f1.jpg" target="_blank">
                              é»æ­¤æŸ¥çœ‹åœè»Šå ´ä½ç½®åœ–
                          </a>
                      </div>
                  </div>
              </div>
              
              <div class="info-section">
                  <div class="section-title">ğŸ’° æ´»å‹•è²»ç”¨èªªæ˜</div>
                  <table class="fee-table">
                      <tr>
                          <td>æœƒå“¡ç”¨é¤</td>
                          <td>æœƒè²» 1,000å…ƒï¼ˆé¤è²»å…ï¼‰</td>
                      </tr>
                      <tr>
                          <td>æœƒå“¡ä¸ç”¨é¤</td>
                          <td>æœƒè²» 1,000å…ƒ</td>
                      </tr>
                      <tr>
                          <td>ç…§é¡§é™ªä¼´è€…ï¼ˆé™1ä½ï¼‰</td>
                          <td>å„ªæƒ  500å…ƒ</td>
                      </tr>
                      <tr>
                          <td>æ”œä¼´è²»ç”¨ï¼ˆç¬¬2ä½é–‹å§‹ï¼‰</td>
                          <td>æ¯äºº 700å…ƒ</td>
                      </tr>
                      <tr>
                          <td>æ–°æœƒå“¡</td>
                          <td>æœƒè²» 1,000å…ƒ</td>
                      </tr>
                  </table>
              </div>
              
              <div class="info-section">
                  <div class="section-title">ğŸ¦ åŒ¯æ¬¾è³‡è¨Š</div>
                  <div class="bank-info">
                      <div class="bank-row">
                          <div class="bank-label">æˆ¶å</div>
                          <div class="bank-value">ç¤¾åœ˜æ³•äººå°ç£å¸•é‡‘æ£®ç—…å‹æ¬Šç›Šä¿ƒé€²æœƒ</div>
                      </div>
                      <div class="bank-row">
                          <div class="bank-label">éŠ€è¡Œ</div>
                          <div class="bank-value">ç¬¬ä¸€éŠ€è¡Œä¸‰é‡åŸ”åˆ†è¡Œ</div>
                      </div>
                      <div class="bank-row">
                          <div class="bank-label">éŠ€è¡Œä»£è™Ÿ</div>
                          <div class="bank-value">007</div>
                      </div>
                      <div class="bank-row">
                          <div class="bank-label">å¸³è™Ÿ</div>
                          <div class="bank-value account-number">211-1015-0402</div>
                      </div>
                  </div>
              </div>
          </div>
          
          <div class="footer">
              <div class="footer-text">èª æ‘¯é‚€è«‹å…¨é«”æœƒå“¡è¸´èºåƒèˆ‡ ğŸ‰</div>
          </div>
      </div>
      
      <div class="registration-section">
          <div class="registration-form">
              <div class="form-title">ğŸ“ ç·šä¸Šå ±å</div>
              
              <div class="success-message" id="successMessage">
                  âœ… å ±åæˆåŠŸï¼æ„Ÿè¬æ‚¨çš„åƒèˆ‡
              </div>
              
              <form id="registrationForm">
                  <div class="form-group">
                      <label for="name">å§“å *</label>
                      <input type="text" id="name" name="name" required>
                  </div>
                  
                  <div class="form-group">
                      <label for="phone">è¯çµ¡é›»è©± *</label>
                      <input type="tel" id="phone" name="phone" required>
                  </div>
                  
                  <div class="form-group">
                      <label for="email">é›»å­éƒµä»¶</label>
                      <input type="email" id="email" name="email">
                  </div>
                  
                  <div class="form-group">
                      <label>å ±åé¡å‹ *</label>
                      <div class="radio-group">
                          <div class="radio-option">
                              <input type="radio" id="member-meal" name="type" value="member-meal" data-fee="1000" required>
                              <label for="member-meal">æœƒå“¡ç”¨é¤ï¼ˆæœƒè²»1,000å…ƒï¼Œé¤è²»å…ï¼‰</label>
                          </div>
                          <div class="radio-option">
                              <input type="radio" id="member-no-meal" name="type" value="member-no-meal" data-fee="1000">
                              <label for="member-no-meal">æœƒå“¡ä¸ç”¨é¤ï¼ˆæœƒè²»1,000å…ƒï¼‰</label>
                          </div>
                          <div class="radio-option">
                              <input type="radio" id="caregiver" name="type" value="caregiver" data-fee="500">
                              <label for="caregiver">ç…§é¡§é™ªä¼´è€…ï¼ˆå„ªæƒ 500å…ƒï¼Œé™1ä½ï¼‰</label>
                          </div>
                          <div class="radio-option">
                              <input type="radio" id="companion" name="type" value="companion" data-fee="700">
                              <label for="companion">æ”œä¼´è²»ç”¨ï¼ˆç¬¬2ä½é–‹å§‹æ¯äºº700å…ƒï¼‰</label>
                          </div>
                          <div class="radio-option">
                              <input type="radio" id="new-member" name="type" value="new-member" data-fee="1000">
                              <label for="new-member">æ–°æœƒå“¡ï¼ˆæœƒè²»1,000å…ƒï¼‰</label>
                          </div>
                      </div>
                  </div>
                  
                  <div class="form-group">
                      <label for="companions">åŒè¡Œäººæ•¸ï¼ˆä¸å«æœ¬äººï¼‰</label>
                      <input type="number" id="companions" name="companions" min="0" max="10" value="0">
                  </div>
                  
                  <div class="form-group">
                      <label for="notes">å‚™è¨»</label>
                      <textarea id="notes" name="notes" placeholder="ç‰¹æ®Šéœ€æ±‚æˆ–å…¶ä»–èªªæ˜"></textarea>
                  </div>
                  
                  <div class="fee-display">
                      <div class="label">æ‡‰ç¹³è²»ç”¨</div>
                      <div class="amount" id="totalFee">NT$ 0</div>
                  </div>
                  
                  <button type="submit" class="submit-btn">ç¢ºèªå ±å</button>
              </form>
          </div>
          
          <div class="registration-status">
              <div class="status-title">ğŸ“Š å ±åçµ±è¨ˆ</div>
              
              <div class="status-stats">
                  <div class="stat-card">
                      <div class="stat-label">ç¸½å ±åäººæ•¸</div>
                      <div class="stat-number" id="totalCount">0</div>
                  </div>
                  <div class="stat-card">
                      <div class="stat-label">ç”¨é¤äººæ•¸</div>
                      <div class="stat-number" id="mealCount">0</div>
                  </div>
              </div>
              
              <div class="registration-list" id="registrationList">
                  <div class="empty-state">å°šç„¡å ±åè³‡æ–™</div>
              </div>
          </div>
      </div>
  </div>
  
  <script>
      // å„²å­˜å ±åè³‡æ–™
      let registrations = JSON.parse(localStorage.getItem('registrations')) || [];

      <script>
// ==================== GAS API è¨­å®š ====================
const GAS_API_URL = 'https://script.google.com/macros/s/AKfycbx5_mwOx0MvSC78iJ_LHtYibBcIDTZ8k09HU9_5D0dcRGCYRwSAL8_6iCAO013dr78VTQ/exec'; // æ›¿æ›æˆæ‚¨çš„ GAS Web App URL

// ==================== API å‘¼å«å‡½æ•¸ ====================

/**
 * æ–°å¢å ±ååˆ° Google Sheets
 */
async function saveToGoogleSheets(registration) {
try {
  const response = await fetch(GAS_API_URL, {
    method: 'POST',
    mode: 'no-cors', // GAS éœ€è¦ä½¿ç”¨ no-cors æ¨¡å¼
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      action: 'add',
      ...registration
    })
  });
  
  return { success: true };
} catch (error) {
  console.error('å„²å­˜åˆ° Google Sheets å¤±æ•—:', error);
  return { success: false, error: error.message };
}
}

/**
 * å¾ Google Sheets è¼‰å…¥å ±åè³‡æ–™
 */
async function loadFromGoogleSheets() {
try {
  const response = await fetch(`${GAS_API_URL}?action=getAll`);
  const result = await response.json();
  
  if (result.success) {
    return result.data;
  } else {
    console.error('è¼‰å…¥è³‡æ–™å¤±æ•—:', result.message);
    return [];
  }
} catch (error) {
  console.error('å¾ Google Sheets è¼‰å…¥å¤±æ•—:', error);
  return [];
}
}

/**
 * è¼‰å…¥çµ±è¨ˆè³‡æ–™
 */
async function loadStatistics() {
try {
  const response = await fetch(`${GAS_API_URL}?action=getStats`);
  const result = await response.json();
  
  if (result.success) {
    return result.data;
  } else {
    console.error('è¼‰å…¥çµ±è¨ˆå¤±æ•—:', result.message);
    return null;
  }
} catch (error) {
  console.error('è¼‰å…¥çµ±è¨ˆå¤±æ•—:', error);
  return null;
}
}

// ==================== ä¿®æ”¹åŸæœ‰çš„è¡¨å–®æäº¤å‡½æ•¸ ====================

// æ‰¾åˆ°åŸæœ¬çš„è¡¨å–®æäº¤äº‹ä»¶ç›£è½å™¨ï¼Œä¸¦ä¿®æ”¹ç‚ºä»¥ä¸‹å…§å®¹ï¼š
document.getElementById('registrationForm').addEventListener('submit', async function(e) {
e.preventDefault();

const formData = new FormData(e.target);
const typeRadio = document.querySelector('input[name="type"]:checked');
const companions = parseInt(formData.get('companions')) || 0;
const baseFee = parseInt(typeRadio.dataset.fee);
const totalFee = baseFee + (companions * 700);

const registration = {
  id: Date.now(),
  name: formData.get('name'),
  phone: formData.get('phone'),
  email: formData.get('email'),
  type: typeRadio.value,
  typeLabel: typeRadio.nextElementSibling.textContent,
  companions: companions,
  totalFee: totalFee,
  notes: formData.get('notes'),
  timestamp: new Date().toLocaleString('zh-TW')
};

// å„²å­˜åˆ° localStorageï¼ˆæœ¬åœ°å‚™ä»½ï¼‰
registrations.push(registration);
localStorage.setItem('registrations', JSON.stringify(registrations));

// å„²å­˜åˆ° Google Sheets
const result = await saveToGoogleSheets(registration);

// é¡¯ç¤ºæˆåŠŸè¨Šæ¯
const successMessage = document.getElementById('successMessage');
if (result.success) {
  successMessage.textContent = 'âœ… å ±åæˆåŠŸï¼è³‡æ–™å·²å„²å­˜';
} else {
  successMessage.textContent = 'âœ… å ±åæˆåŠŸï¼ï¼ˆå·²å„²å­˜åˆ°æœ¬åœ°ï¼‰';
}
successMessage.style.display = 'block';
setTimeout(() => {
  successMessage.style.display = 'none';
}, 3000);

// é‡ç½®è¡¨å–®
e.target.reset();
updateFee();

// æ›´æ–°å ±ååˆ—è¡¨
updateRegistrationList();
});

// ==================== é é¢è¼‰å…¥æ™‚åŒæ­¥è³‡æ–™ ====================

// é é¢è¼‰å…¥æ™‚ï¼Œå˜—è©¦å¾ Google Sheets è¼‰å…¥è³‡æ–™
window.addEventListener('DOMContentLoaded', async function() {
try {
  const cloudData = await loadFromGoogleSheets();
  
  if (cloudData && cloudData.length > 0) {
    // åˆä½µæœ¬åœ°å’Œé›²ç«¯è³‡æ–™ï¼ˆå»é‡ï¼‰
    const localData = JSON.parse(localStorage.getItem('registrations')) || [];
    const mergedData = [...cloudData];
    
    // å°‡æœ¬åœ°è³‡æ–™ä¸­ä¸åœ¨é›²ç«¯çš„è³‡æ–™åŠ å…¥
    localData.forEach(local => {
      const exists = cloudData.some(cloud => 
        cloud.name === local.name && 
        cloud.phone === local.phone && 
        cloud.timestamp === local.timestamp
      );
      if (!exists) {
        mergedData.push(local);
      }
    });
    
    registrations = mergedData;
    localStorage.setItem('registrations', JSON.stringify(registrations));
    updateRegistrationList();
  }
} catch (error) {
  console.error('åŒæ­¥è³‡æ–™å¤±æ•—:', error);
}
});

      
      // æ›´æ–°è²»ç”¨é¡¯ç¤º
      function updateFee() {
          const typeRadios = document.querySelectorAll('input[name="type"]');
          const companions = parseInt(document.getElementById('companions').value) || 0;
          let baseFee = 0;
          
          typeRadios.forEach(radio => {
              if (radio.checked) {
                  baseFee = parseInt(radio.dataset.fee);
              }
          });
          
          // è¨ˆç®—åŒè¡Œäººæ•¸è²»ç”¨ï¼ˆæ¯äºº700å…ƒï¼‰
          const companionFee = companions * 700;
          const totalFee = baseFee + companionFee;
          
          document.getElementById('totalFee').textContent = `NT$ ${totalFee.toLocaleString()}`;
      }
      
      // ç›£è½é¡å‹é¸æ“‡è®ŠåŒ–
      document.querySelectorAll('input[name="type"]').forEach(radio => {
          radio.addEventListener('change', updateFee);
      });
      
      // ç›£è½åŒè¡Œäººæ•¸è®ŠåŒ–
      document.getElementById('companions').addEventListener('input', updateFee);
      
      // è¡¨å–®æäº¤
      document.getElementById('registrationForm').addEventListener('submit', function(e) {
          e.preventDefault();
          
          const formData = new FormData(e.target);
          const typeRadio = document.querySelector('input[name="type"]:checked');
          const companions = parseInt(formData.get('companions')) || 0;
          const baseFee = parseInt(typeRadio.dataset.fee);
          const totalFee = baseFee + (companions * 700);
          
          const registration = {
              id: Date.now(),
              name: formData.get('name'),
              phone: formData.get('phone'),
              email: formData.get('email'),
              type: typeRadio.value,
              typeLabel: typeRadio.nextElementSibling.textContent,
              companions: companions,
              totalFee: totalFee,
              notes: formData.get('notes'),
              timestamp: new Date().toLocaleString('zh-TW')
          };
          
          registrations.push(registration);
          localStorage.setItem('registrations', JSON.stringify(registrations));
          
          // é¡¯ç¤ºæˆåŠŸè¨Šæ¯
          const successMessage = document.getElementById('successMessage');
          successMessage.style.display = 'block';
          setTimeout(() => {
              successMessage.style.display = 'none';
          }, 3000);
          
          // é‡ç½®è¡¨å–®
          e.target.reset();
          updateFee();
          
          // æ›´æ–°å ±ååˆ—è¡¨
          updateRegistrationList();
      });
      
      // æ›´æ–°å ±ååˆ—è¡¨é¡¯ç¤º
      function updateRegistrationList() {
          const listContainer = document.getElementById('registrationList');
          
          if (registrations.length === 0) {
              listContainer.innerHTML = '<div class="empty-state">å°šç„¡å ±åè³‡æ–™</div>';
              document.getElementById('totalCount').textContent = '0';
              document.getElementById('mealCount').textContent = '0';
              return;
          }
          
          // è¨ˆç®—çµ±è¨ˆæ•¸æ“š
          let totalPeople = 0;
          let mealCount = 0;
          
          registrations.forEach(reg => {
              totalPeople += 1 + reg.companions;
              if (reg.type === 'member-meal' || reg.type === 'caregiver' || reg.type === 'companion') {
                  mealCount += 1 + reg.companions;
              }
          });
          
          document.getElementById('totalCount').textContent = totalPeople;
          document.getElementById('mealCount').textContent = mealCount;
          
          // é¡¯ç¤ºå ±ååˆ—è¡¨
          listContainer.innerHTML = registrations.map(reg => `
              <div class="registration-item">
                  <div class="name">${reg.name}</div>
                  <div class="details">
                      ${reg.typeLabel}<br>
                      ğŸ“ ${reg.phone}
                      ${reg.companions > 0 ? `<br>ğŸ‘¥ åŒè¡Œ ${reg.companions} äºº` : ''}
                      ${reg.notes ? `<br>ğŸ“ ${reg.notes}` : ''}
                  </div>
                  <div class="fee">æ‡‰ç¹³: NT$ ${reg.totalFee.toLocaleString()}</div>
              </div>
          `).reverse().join('');
      }
      
      // é é¢è¼‰å…¥æ™‚æ›´æ–°åˆ—è¡¨
      updateRegistrationList();
  </script>
</body>
</html>
